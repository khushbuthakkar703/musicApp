function renderDboxStatuses(){0!=$(".dl-order").length&&Object.keys(TX.dropBoxOrders).length>0&&$(".dl-order").each(function(t,e){$(".dropbox-btn.whole",e).removeClass("started"),e.id in TX.dropBoxOrders&&$(".dropbox-btn.whole",e).each(function(){var t=$(this).data("dbxb");t in TX.dropBoxOrders[e.id]&&$(this).addClass(TX.dropBoxOrders[e.id][t])})})}function hideZendesk(){"function"==typeof zE&&zE(function(){zE.hide()})}function autoFillZendesk(){$("#isLogged").length>0&&"function"==typeof zE&&zE(function(){zE.identify({name:$("#ufln").val(),email:$("#ueft").val()})})}function closeLoginForm(){hideZendesk(),$("#loginFormCont").is(":visible")&&TX.hideByFade("#loginFormCont",!1,function(){$("#loginFrame").attr("src",""),TX.hideMask(),$("#loginFormCont").removeAttr("style")})}function showLogin(){hideZendesk(),$("#loginFrame").attr("src",location.protocol+"//"+location.host+"/scripts/handler.php?act=login&prompt=1&referrer="+escape(location.href)),TX.viewID>=2&&$("#loginFormCont").center(!0),TX.showMask(),TX.showByFade($("#loginFormCont")),"function"==typeof zE&&setTimeout(function(){zE(function(){zE.setHelpCenterSuggestions({labels:["login","reset-pw","signup"]}),zE.show()})},1e3)}function verticalShiftHandler(){if(TX.playerVisible){var t;t=1==TX.viewID?45:64,$("header").css({top:t+"px"}),$("#mainBay").css({top:t+58+"px"})}}function showPlayer(){if(TX.playerVisible)return!1;var t=1==TX.viewID?45:64;$("#playerBay").animate({top:"0px"},300),$("header").animate({top:t+"px"},300),$("#mainBay").animate({top:58+t+"px"},300,function(){}),$("#bottomBay").animate({top:58+t+"px"},300),TX.playerVisible=!0}function hidePlayer(){if(!TX.playerVisible)return!1;var t=1==TX.viewID?45:64;$("#playerBay").animate({top:"-"+t+"px"},300),$("header").animate({top:"0px"},300),$("#mainBay").animate({top:"58px"},300,function(){}),$("#bottomBay").animate({top:"58px"},300),TX.playerVisible=!1}function plScrollToCurrent(){$(".jp-playlist").scrollTop($(".jp-playlist-current").position().top)}function adjustPlHeaders(){if(!(TX.viewID<=2)&&$("#nowPlayCont").is(":visible")&&0!=mainPlaylist.playlist.length){var t=$(".jp-playlist .playlist-item .tar-cont .tk-artist").first().position(),e=$(".jp-playlist .playlist-item .label").first().position(),a=$(".jp-playlist .playlist-item .r-date").first().position();$(".playlist-item.hdr .tk-artist").css("left",t.left-92+"px"),$(".playlist-item.hdr .label").css("left",e.left-132+"px"),$(".playlist-item.hdr .r-date").css("left",a.left-170+"px")}}function hidePlayerPopups(){var t=TX.viewID>=4?250:0;$("#playerBay .com-drop-menu").is(":visible")&&$("#playerBay .com-drop-menu").fadeOut(t,function(){$("#playerBay .com-drop-menu").removeAttr("style"),TX.hidePlayerMask()})}function showPlaylist(){$("#nowPlayCont").is(":visible")||(TX.showMask(400),$("#nowPlayCont").slideDown(200,"easeInCirc",function(){plScrollToCurrent(),adjustPlHeaders()}),$("#playerTitleInfo").children(":not(.player-util-btns, #logoReplica)").addClass("hide"),$("#playerTitleInfo .buy-fly").addClass("hide"),$(".jp-audio, #playerTitleInfo").addClass("stretch"),TX.viewID<=2&&($("#PlTtlInfo").hide(),$(".jp-progress").addClass("vert-exp")),PWF.drawWaveform(),$("#playlistExpand").hide(),$("#playlistCollapse").show(),hidePlayerPopups(),hideTitlePopup())}function hidePlaylist(t){if($("#nowPlayCont").is(":visible")){var e=t?20:150;$("#nowPlayCont").slideUp(e,function(){$("#playerTitleInfo, #v1WfInfoCont, .player-util-btns").children().removeClass("hide"),$(".jp-audio, #playerTitleInfo").removeClass("stretch"),$("#PlTtlInfo").removeAttr("style"),$(".jp-progress").removeClass("vert-exp"),PWF.drawWaveform()}),$("#nowPlayTtl .np-btns").removeAttr("style"),$("#playlistCollapse").hide(),$("#playlistExpand").show(),$(".utl-drop-cont").empty(),hidePlayerPopups(),TX.hideMask(),TX.hidePlayerMask()}}function enablePlaylistLinks(){$(".jp-playlist li a").unbind("click"),$(".jp-playlist li .com-buy").click(function(){var t=TX.getEvalObjFromData($(this),"cart");add2cart(t,$(this))}),$(".jp-playlist li .cart-alt").click(function(){showCartAlt(this,$(".jp-playlist"))})}function clearPlaylist(){mainPlaylist.remove(),clearLocalPlaylist(),hidePlaylist(),hidePlayer(),hideCartAlt(),TX.cartsPLStats={},$(".play-trk").removeClass("playing"),$(".play-ttl").removeClass("playing")}function updatePlaylistCount(){var t=0;mainPlaylist.playlist&&(t=mainPlaylist.playlist.length),$("#plCount").html(t.toString())}function updatePl2localStore(){if(!localStorage)return!1;if(0==mainPlaylist.playlist.length)return!1;if("0"==mainPlaylist.playlist[0].title_id)return!1;var t,e;t=new Object,e=Math.round((new Date).getTime()/1e3),t={playlist:mainPlaylist.playlist,plCurrent:mainPlaylist.current,plPlayTime:TX.currentPlayTime,plTimeStamp:e,plVersion:2},localStorage.setItem("localPlaylist",JSON.stringify(t))}function getLocalPl2Playlist(){var t=!1;if(!localStorage)return console.log("No Local Storage enabled."),t=!0,!1;try{window.localPlaylist=JSON.parse(localStorage.getItem("localPlaylist"))}catch(e){t=!0}if(localPlaylist&&localPlaylist.playlist.length>0){if(!localPlaylist.hasOwnProperty("plVersion")||"2"!=localPlaylist.plVersion)return console.warn("Warning: Old playlist format detected, clearing playlist."),clearLocalPlaylist(),t=!0,!1;if(!localPlaylist.plTimeStamp)return clearLocalPlaylist(),t=!0,!1;var a=Math.round((new Date).getTime()/1e3);parseInt(localPlaylist.plTimeStamp)>=a-86400*TX.localPlDaysTTL?(mainPlaylist.setPlaylist(localPlaylist.playlist),mainPlaylist.refreshNames(),enablePlaylistLinks(),TX.storedPlayTime=localPlaylist.plPlayTime,showPlayer(),mainPlaylist.select(localPlaylist.plCurrent),setLocalCurrentPlItem(!1),updatePlaylistCount(),getPlaylistCartStatuses()):t=!0}else t=!0;TX.useDummyPlay&&(TX.mobileDummyPlLoaded=t)}function setLocalCurrentPlItem(t){t?mainPlaylist.play():(TX.storedPlayTime=TX.storedPlayTime||.1,$("#tsjp1").jPlayer("pause",TX.storedPlayTime))}function clearLocalPlaylist(){return localStorage?(localStorage.removeItem("localPlaylist"),localStorage.removeItem("plString"),void localStorage.removeItem("plCurrent")):!1}function hideKeyCommands(){$("#keyComCont").is(":visible")&&($("#keyComCont").fadeOut(),TX.hideMask())}function getCurrBitrate(){var t=TX.getCookie("bitrate");t?TX.currentBitrate=t:TX.currentBitrate=1,"null"==t&&(TX.currentBitrate=3),TX.currentBitrate=parseInt(TX.currentBitrate)}function getInitVolume(){var t,e=TX.getCookie("volume");e&&"null"!=e&&(t=parseInt(e),isNaN(t)||(TX.volumeInitVal=t))}function hiliteTrackRow(){return mainPlaylist&&0!=mainPlaylist.playlist.length?($(".play-trk").length>0&&($(".play-trk").removeClass("playing"),$(".ptk-"+mainPlaylist.playlist[mainPlaylist.current].track_id+".play-trk").addClass("playing")),$(".play-ttl").length>0&&($(".play-ttl").removeClass("playing"),$(".play-ttl.ptl-"+mainPlaylist.playlist[mainPlaylist.current].title_id).addClass("playing")),void($(".play-ctl").length>0&&($(".play-ctl").removeClass("playing"),$(".ctl-"+mainPlaylist.playlist[mainPlaylist.current].title_id+".play-ctl").addClass("playing")))):!1}function showMenu(){$(".menu-cont").stop(!0,!0).delay(100).slideDown(200,"easeInCirc")}function hideMenu(){TX.viewID>=4||($(".menu-floater").removeAttr("style"),$(".menu-cont").stop(!0,!0).slideUp(200,"easeInCirc"))}function addTrack2UTL(t){if(t=parseInt(t),isNaN(t))return!1;if(!mainPlaylist||0==mainPlaylist.playlist.length)return!1;var e=mainPlaylist.playlist[mainPlaylist.current].track_id;return isNaN(e)?!1:($.ajax({url:TX.handlerScript+"?act=utl_add&utl_id="+t+"&track_id="+e,type:"GET",success:function(t){var e,a;return e=parseInt($(t).find("code").text()),a=$(t).find("message").text(),!isNaN(e)&&a.length>0?(TX.showMessage(a,{title:"Oops"}),!1):void 0}}),void $(".utl-drop-cont").empty())}function showUserTracklistDrop(){$.ajax({url:TX.handlerScript+"?act=utl&view=drop",type:"GET",success:function(t){var e,a;return e=parseInt($(t).find("code").text()),a=$(t).find("message").text(),!isNaN(e)&&a.length>0?(TX.showMessage(a,{title:"Info"}),!1):($(".utl-drop-cont").html($(t).find("data").text()),$(".utl-drop-cont .com-close").click(function(){$(".utl-drop-cont").empty()}),$(".utl-drop-cont .utl-menu-item a").click(function(){addTrack2UTL($(this).data("utlid"))}),void $(".utl-drop-cont").show())}})}function savePlaylistAsTracklist(){if(!mainPlaylist||0==mainPlaylist.playlist.length)return TX.showMessage("Charts are made from playlists... You must have at least one track in your playlist to make a chart.",{title:"Oops, you need something:",showAsError:!0}),!1;var t,e;t=function(){var t,e,a,l,o=[];if(mainPlaylist)for(a=mainPlaylist.playlist,l=a.length,i=0;i<l&&i<500;i++)o.push(a[i].track_id);t=escape($("#messagePopup .mspu-input").val()),e="act=utl_create&title="+t+"&ids="+o.join(","),$.ajax({url:TX.handlerScript,type:"POST",data:e,success:function(t){var e,a;return e=parseInt($(t).find("code").text()),isNaN(e)?!1:(a=$(t).find("message").text(),0!=e&&a.length>0?($("#messagePopup .mspu-cont").html(a),$("#messagePopup").addClass("error"),!1):(TX.hideMessage(),hidePlaylist(),0==e&&a.length>0&&TX.pushPath(a.replace(" ","")),void 0))}})},e='<p style="margin: 5px 0">This chart will be located under <b>My Traxsource > My Charts</b></p><b>Please provide a title for your chart:</b><br><i>Note: A public URL will be generated from this title.</i><br />',TX.showMessage(e,{title:"Creating chart from current playlist:",yesCallback:t,inputMode:!0,inputMin:3})}function renderArtLabLinks(t,e,a,l){if(!TX.mobileDummyPlLoaded&&(t[0].length<4||e.length<3))return TX.comlog("Improper artist or label object in playlist","warn"),!1;var i=[],o=[],n="",r="/artist/",s="/label/";return $(t).each(function(){l?i.push(this[2]):i.push('<a href="../../../public/js/'+r+this[0]+"/"+this[3]+'" class="com-'+(1==this[1]?"artists":"remixers")+'">'+this[2]+"</a>"),a||o.push('<div class="fol-div ellip"><a href="javascript:void(0)" data-follow="{aid: '+this[0]+'}" class="follow">'+this[2]+'</a><svg class="folling-svg"><use xlink:href="/img/vects.v2.svg#following"></use></svg></div>')}),n=l?e[1]:'<a href="../../../public/js/'+s+e[0]+"/"+e[2]+'" class="com-label">'+e[1]+"</a>",a||o.push('<div class="fol-div ellip"><a href="javascript:void(0)" data-follow="{lid: '+e[0]+'}" class="follow">'+e[1]+'</a><svg class="folling-svg"><use xlink:href="/img/vects.v2.svg#following"></use></svg></div>'),{al:i,ll:n,fl:o}}function enablePlayerShares(t){assignShareTitleAttribs(),$("#tsjpcont1 .share").unbind("click").click(function(){if($(this).hasClass("embed"))return showPlayerEmbedCode(t.track_url),!1;var e,a,l;a=location.protocol+"//"+location.host+t.track_url,$(this).hasClass("fbook")&&(e="https://www.facebook.com/sharer.php?u="+a),$(this).hasClass("twitter")&&(l=t.title,e="https://twitter.com/home/?status="+encodeURIComponent(l)+"%20:%20"+a),$(this).hasClass("gplus")&&(e="https://plus.google.com/share?url="+a),window.open(e,"Sharetemp")})}function showPlayerEmbedCode(t){(!t||t.length<2)&&(t="/top/tracks"),$.ajax({url:TX.handlerScript+"?act=embed&url="+t,type:"GET",success:function(t){return!$(t).find("title").text().length>0&&!$(t).find("url").text().length>0?!1:($("#embedPopup #eTitle").html($(t).find("title").text()),$("#embedPopup #embedCodeBox").val($.trim($(t).find("url").text())),$("#embedPopup #embedCodeBox").click(function(){$(this).select()}),$("#embedPopup .com-close").click(function(){hideEmbedPopup()}),$("#embedPopup").center(!0),TX.showMask(),void TX.showByFade($("#embedPopup"),300))}})}function hideEmbedPopup(){TX.hideByFade($("#embedPopup"),300,function(){$("#embedPopup #eTitle").html(""),$("#embedPopup #embedCodeBox").val(""),$("#embedPopup .com-close").unbind()}),TX.hideMask()}function assignShareTitleAttribs(){$(".share").each(function(){$(this).hasClass("embed")&&$(this).attr("title","Embed"),$(this).hasClass("fbook")&&$(this).attr("title","share on Facebook"),$(this).hasClass("twitter")&&$(this).attr("title","share on Twitter"),$(this).hasClass("gplus")&&$(this).attr("title","share on Google Plus")})}function enableShares(){assignShareTitleAttribs(),$(".share:not(.pl)").click(function(){if($(this).hasClass("embed"))return showPlayerEmbedCode(location.pathname),!1;var t,e,a,l;a=location.pathname.length<2?"/top/tracks":location.pathname,e=location.protocol+"//"+location.host+a,$(this).hasClass("fbook")&&(t="https://www.facebook.com/sharer.php?u="+e),$(this).hasClass("twitter")&&(l=document.title,t="https://twitter.com/home/?status="+encodeURIComponent(l)+"%20:%20"+e),$(this).hasClass("gplus")&&(t="https://plus.google.com/share?url="+e),window.open(t,"Sharetemp")})}function enableTpopupShares(){assignShareTitleAttribs(),$("#ttlPopupDyn .share").unbind("click").click(function(){var t,e,a;return $(this).hasClass("embed")?(e="/title/"+$("#ttlPopupDyn").data("tid"),showPlayerEmbedCode(e),!1):(e=location.protocol+"//"+location.hostname+$("#ttlPopupDyn h1.title a").attr("href"),$(this).hasClass("fbook")&&(t="https://www.facebook.com/sharer.php?u="+e),$(this).hasClass("twitter")&&(a=$("#ttlPopupDyn h1.title a").text(),t="https://twitter.com/home/?status="+encodeURIComponent(a)+"%20:%20"+e),$(this).hasClass("gplus")&&(t="https://plus.google.com/share?url="+e),void window.open(t,"Sharetemp"))})}function followEntity(t){var e,a,l,i;return(e=TX.getEvalObjFromData(t,"follow"))?(e.aid&&(i="artists",l="&artist_id="+e.aid),e.lid&&(i="labels",l="&label_id="+e.lid),a=$(t).hasClass("following")?"?act=no_follow":"?act=follow",void $.ajax({url:TX.handlerScript+a+l,type:"GET",success:function(e){var a,l,i;return a=parseInt($(e).find("code").text()),isNaN(a)?!1:(l=$(e).find("message").text(),(-1==a||2==a)&&l.length>0?($p=$(t).parent().parent(),$p.hasClass("ttl-drop-menu")||($p=$(t).parent().parent().parent()),$p.hasClass("ttl-drop-menu")&&$p.hide(),i={title:"Note on following...",showAsError:2==a,hideComDrops:!0},TX.showMessage(l,i),!1):($(t).hasClass("com-follow")&&($(t).hasClass("following")?$(t).removeClass("following"):$(t).addClass("following")),void($(t).hasClass("follow")&&($(t).parent().addClass("following"),$(t).unbind("click")))))}})):!1}function add2cart(t,e,a){if(!TX.cartAddTimeout){TX.cartAddTimeout=!0,setTimeout(function(){TX.cartAddTimeout=!1},200),void 0==a&&(a=-1),TX.isMobile&&showLoader();var l,i=!1,o=!1;l="?act=sc_add",t.hasOwnProperty("track_id")?(l+="&track_id="+t.track_id,o=t.track_id.toString()):t.hasOwnProperty("title_id")&&(l+="&title_id="+t.title_id),t.hasOwnProperty("bitrate")&&t.bitrate&&(l+="&bitrate="+t.bitrate),t.hasOwnProperty("upgrade")&&t.upgrade&&(i=!0,a="0"),-1!=a?l+="&cart_id="+a:a=TX.defaultCart,TX.getJson(TX.cartScript+l,function(l){$(e).parent().removeClass("bought"),i&&($("#au_"+t.track_id).parent().removeClass("added"),$("#wu_"+t.track_id).parent().removeClass("added")),$(e).parent().addClass("added"),o&&$(".pl-trk-"+o).length>0&&(TX.cartsPLStats.hasOwnProperty(o)?TX.cartsPLStats[o].push(a):TX.cartsPLStats[o]=[a],updateSinglePlaylistBuyBtn(o,!0)),o||($(".jp-playlist .pl-ttl-"+t.title_id+" .buy-cont").addClass("added"),$(".jp-playlist .pl-ttl-"+t.title_id).hasClass("jp-playlist-current")&&np_pi2added()),o?TX.cartsPageStats.tracks.hasOwnProperty(o)?TX.cartsPageStats.tracks[o].push(a):TX.cartsPageStats.tracks[o]=[a]:TX.cartsPageStats.titles.hasOwnProperty(t.title_id)?TX.cartsPageStats.titles[t.title_id].push(a):TX.cartsPageStats.titles[t.title_id]=[a],l.hasOwnProperty("carts")&&updateGlobalCarts(l.carts.data,l.carts.html),hideLoader(),/\/cart/i.test(location.pathname)&&TX.refreshPage();var n,r;n=l.error?parseInt(l.error):0,r=l.message,-1==n?showLogin():n>0&&r.length>0&&!i&&TX.showMessage(r,{title:"Shopping Cart Note",showAsError:5==n||6==n})})}}function np_pi2added(){$("#plrnpBuy").parent().hasClass("added")||($("#plrnpBuy").parent().removeClass("bought"),$("#plrnpBuy").parent().addClass("added")),$("#plrsBuy").parent().hasClass("added")||($("#plrsBuy").parent().removeClass("bought"),$("#plrsBuy").parent().addClass("added"))}function np_piUnAdded(){$("#plrnpBuy").parent().hasClass("added")&&$("#plrnpBuy").parent().removeClass("added"),$("#plrsBuy").parent().hasClass("added")&&$("#plrsBuy").parent().removeClass("added"),$(".jp-playlist-current .buy-cont").removeClass("added")}function positionCartAlt(t){if(!(TX.viewID<=2)&&(t||$("#cartAltCont").is(":visible"))){var e,a,l={},i={};TX.currCartAltCaller.append?(t&&$("#cartAltCont").show(),"#titlePopup .trklist"==TX.currCartAltCaller.append.selector?(l.top=$(TX.currCartAltCaller.caller).parent().offset().top+$("#titlePopup .trk-list-cont").scrollTop()-$("#titlePopup .trk-list-cont").offset().top,l.left=$(TX.currCartAltCaller.caller).parent().position().left-3,a=parseInt($("#titlePopup .trk-list-cont").css("max-height")),$("#titlePopup .trk-list-cont").height()<a&&$("#titlePopup .trk-list-cont").animate({height:a},500,function(){adjustTitlePopupPosition()}),e=$(".ptk-"+TX.stateHolders.currentCartAltItem.id).position().top,$("#titlePopup .trk-list-cont").animate({scrollTop:e},500)):"#titlePopup .ttl-block"==TX.currCartAltCaller.append.selector?(l.left=$("#titlePopup .t-image").outerWidth()+8,l.top=$(TX.currCartAltCaller.caller).parent().parent().position().top+10):l=$(TX.currCartAltCaller.caller).parent().position(),i.top=l.top+$(TX.currCartAltCaller.caller).height()+2,i.left=l.left-$("#cartAltCont").outerWidth()+$(TX.currCartAltCaller.caller).parent().width()+3,$("#cartAltCont").css({top:i.top+"px",left:i.left+"px"}),TX.currCartAltCaller.append.hasClass("jp-playlist")&&(e=$(".pl-trk-"+TX.stateHolders.currentCartAltItem.id).position().top,$(".jp-playlist").animate({scrollTop:e},500))):(l=$(TX.currCartAltCaller.caller).offset(),i.top=l.top+$(TX.currCartAltCaller.caller).height()+1,i.left=l.left+$(TX.currCartAltCaller.caller).outerWidth()-$("#cartAltCont").outerWidth()+2,i.left<15&&(i.left=15),$("#cartAltCont").css({top:i.top+"px",left:i.left+"px"}),t&&$("#cartAltCont").show())}}function showCartAlt(t,e,a,l,i,o,n){if(void 0!=t){void 0==a&&(a=!1),void 0==o&&(o=!1),void 0==n&&(n=!1);var r,s,c,p,u,d=null,h=null,m=0,y=!1,f="Add";if(a||($(t).hasClass("cart-move")?(r=$(t).parent().parent().data("cart"),f="Move"):r=$(".com-buy",$(t).parent()).data("cart"),"object"!=typeof r&&(r=TX.getEvalObj(r)),r.hasOwnProperty("track_id")?(d="track",h=r.track_id):(d="title",h=r.title_id)),$("#cartAltCont").is(":visible")&&d==TX.stateHolders.currentCartAltItem.type&&h==TX.stateHolders.currentCartAltItem.id)return void hideCartAlt(200);for(TX.stateHolders.currentCartAltItem={type:d,id:h},a||($(t).hasClass("player")?TX.cartsPLStats.hasOwnProperty(h)&&(y=TX.cartsPLStats[h]):"title"==d?TX.cartsPageStats.titles.hasOwnProperty(h)&&(y=TX.cartsPageStats.titles[h]):TX.cartsPageStats.tracks.hasOwnProperty(h)&&(y=TX.cartsPageStats.tracks[h])),p='<svg class="added-svg cart-alt-svg"><use xlink:href="/img/vects.v2.svg#check-mark"></use></svg>',u=$(t).hasClass("cart-move")||$(t).hasClass("cmove-to")?"":'<div class="cart-alt-spacer"></div>',$("#cartAltCont .cart-alt-list").stop(!0,!0).empty(),s=TX.cartList.length;s--;)o&&$.inArray(TX.cartList[m].cart_id,o)>-1?m++:(n||2!=TX.cartList[m].cart_id)&&(c=1==TX.cartList[m]["default"]?'<svg class="default-svg default cart-alt-svg"><use xlink:href="/img/vects.v2.svg#diamond"></use></svg>':0==TX.cartList[m].cart_id?'<svg class="cart-svg cart-alt-svg"><use xlink:href="/img/vects.v2.svg#cart"></use></svg>':1==TX.cartList[m].cart_id?'<svg class="wl-svg cart-alt-svg"><use xlink:href="/img/vects.v2.svg#wl"></use></svg>':2==TX.cartList[m].cart_id?'<svg class="trsh-svg cart-alt-svg"><use xlink:href="/img/vects.v2.svg#trash"></use></svg>':"",y&&-1!==$.inArray(TX.cartList[m].cart_id,y)?$("#cartAltCont .cart-alt-list").append('<div class="cart-alt-dummy ellip">'+p+c+TX.cartList[m].name+"</div>"):$("#cartAltCont .cart-alt-list").append('<a  href="javascript:void(0)" class="cart-alt-cart ellip" data-cart_id="'+TX.cartList[m].cart_id+'">'+u+c+TX.cartList[m].name+"</a>"),m++);void 0!=l?$(".cart-alt-cart").click(function(){return l($(this).data("cart_id")),!1}):$(".cart-alt-cart").click(function(){add2cart(r,t,$(this).data("cart_id").toString()),hideCartAlt()}),i&&void 0!=i?$("#cartAltCont .cart-alt-hdr").html(i):$("#cartAltCont .cart-alt-hdr").html(f+' <span style="color: #fff;">'+("title"==d?"release":"track")+"</span> to:"),$("#cartAltCont .new-cart-cont > a:first").unbind().click(function(){void 0!=l?addOrEditCart(!1,function(t){l(t)}):addOrEditCart(!1,function(e){add2cart(r,t,e.toString()),hideCartAlt()})}),TX.currCartAltCaller.caller=t,TX.viewID<=2?(TX.showMask(),$(t).hasClass("player")&&TX.showPlayerMask(),TX.currCartAltCaller.append=!1,$("#cartAltCont").center(!0).show()):e?($("#cartAltCont").detach().appendTo(e),$("#cartAltCont").addClass("cart-alt-appended"),TX.currCartAltCaller.append=e,positionCartAlt(!0)):(TX.currCartAltCaller.append=!1,cartAltResetHomePos(),positionCartAlt(!0)),$("#cartAltCont .cart-alt-list").scrollTop(0)}}function cartAltResetHomePos(){$("#cartAltCont").hasClass("cart-alt-appended")&&($("#cartAltCont").detach().insertAfter($("#bottomBarPopup")),$("#cartAltCont").removeClass("cart-alt-appended"))}function hideCartAlt(t){$("#cartAltCont").is(":visible")&&(void 0==t&&(t=0),$("#cartAltCont").fadeOut(t,function(){$("#cartAltCont .cart-alt-list").empty(),$("#cartAltCont").removeAttr("style"),cartAltResetHomePos()}),TX.viewID<=2&&($("#nowPlayCont").is(":visible")||TX.hideMask(),TX.hidePlayerMask()))}function processCart(t,e,a,l,i){var o,n,r,s;o=e?"&name="+encodeURIComponent(e):"",n=l?"&default=1":"",r=a?"&cart_id="+a:"",s=TX.cartScript+"?act="+t+r+o+n,TX.getJson(s,function(e){return $(".mspu-cart-def-cb").prop("checked",!1),0!=e.error?void TX.showMessage(e.message,{showAsError:!0,title:"Oops"}):void(e.hasOwnProperty("carts")&&(TX.hideMessage(),updateGlobalCarts(e.carts.data,e.carts.html),"del"==t&&getPlaylistCartStatuses(),"default"==t&&TX.getDefaultCart(),void 0!=i&&e.carts.hasOwnProperty("cart_id")&&i(e.carts.cart_id),/\/settings/i.test(location.pathname)&&TX.refreshPage()))})}function addOrEditCart(t,e){var a,l,i,o;t?(l="Modify Cart",a="Enter the name for your cart",i="rename",o="Rename Cart"):(l="Add New Cart",a="Enter the name for your new cart",i="add",t=!1,o="Create Cart"),TX.showMessage(a,{title:l,inputMode:!0,showCartDefault:"add"==i,inputMin:2,inputMax:60,saveBtnText:o,yesCallback:function(){var a;a=encodeURIComponent($(".mspu-input").val()),processCart(i,a,t,$(".mspu-cart-def-cb").is(":checked"),e)}})}function enableUserBarCartMenu(){$("#cartLink").click(function(){TX.viewID>3&&TX.pushPath($(this).data("url")),$(".cart-dropdown").is(":visible")?hideCartMenu():showCartMenu(),hideMenu()}),$(".cart-dropdown .cart-dd-link").click(function(){return $(".cart-dd-list").scrollTop(0),$(".cart-dropdown").hide(),TX.handleClick($(this)),!1}),$(".header-cart .cart-lnk-cell.def").first().attr("title","default"),$(".header-cart .cart-lnk-cell.def").click(function(t){if(t.stopPropagation(),t.preventDefault(),!$(".default-svg",this).hasClass("default")&&!$(".default-svg",this).hasClass("trash")){var e=$(this).parent().prop("id").replace("ubCart-","");return processCart("default","",e),!1}}),$(".cart-dropdown .new-cart-cont > a:first").click(function(){addOrEditCart()})}function updateGlobalCarts(t,e){t||$("#cartList").length>0&&(t=TX.getEvalObj($("#cartList").val()),$("#cartList").remove()),TX.cartList=t,e&&($(".header-div.header-cart").empty(),$(".header-div.header-cart")[0].innerHTML=e,enableUserBarCartMenu())}function getAndUpdateGlobalCarts(){TX.getJson(TX.cartScript+"?act=carts",function(t){t.hasOwnProperty("carts")&&updateGlobalCarts(t.carts.data,t.carts.html)})}function showCartMenu(){$(".cart-dropdown").delay(100).slideDown(150),hidePlaylist(!0)}function hideCartMenu(){$(".cart-dd-list").scrollTop(0),$(".cart-dropdown").stop(!0,!0).slideUp(150)}function updateSinglePlaylistBuyBtn(t,e){t&&$(".pl-trk-"+t).length>0&&(e?$(".jp-playlist .pl-trk-"+t+" .buy-cont").addClass("added"):$(".pl-trk-"+t+" .buy-cont").removeClass("added"),$(".jp-playlist .pl-trk-"+t).hasClass("jp-playlist-current")&&(e?np_pi2added():np_piUnAdded()))}function updatePlaylistBuyButtons(){$(".jp-playlist .buy-cont").removeClass("added");for(var t in TX.cartsPLStats)$(".pl-trk-"+t+" .buy-cont").addClass("added");$(".jp-playlist-current .buy-cont").hasClass("added")&&np_pi2added()}function getPlaylistCartStatuses(){var t,e,a,l=[],i=0;if(a=mainPlaylist.playlist.length,0!=a){for(;a--;)l.push(mainPlaylist.playlist[i].track_id),i++;t=TX.cartScript+"?act=cpd",e="ids="+l.join(","),TX.getJson(t,function(t){var e;return e=t.length,0==e?void(TX.cartsPLStats=!1):(TX.cartsPLStats=t,void updatePlaylistBuyButtons())},"POST",e)}}function updatePlaylistCartStats(t){for(var e=Object.keys(t),a=e.length,l=0;a--;)TX.cartsPLStats.hasOwnProperty(e[l])&&(t[e[l]]?TX.cartsPLStats[e[l]]=t[e[l]]:(delete TX.cartsPLStats[e[l]],updateSinglePlaylistBuyBtn(e[l],!1))),l++}function imageToFull(t){$("#fullImgCont").is(":visible")||0!=$(t+" img").length&&($("#fullImgCont").append($(t+" img").first().clone()),TX.showMask(),$("#fullImgCont").center(!0,0,0,!1,"window"),$("#fullImgCont").fadeIn(300,"easeInCubic"),$("#titlePopup").is(":visible")&&$("#bodyMask").css("z-index","1980"))}function hideFullImage(){$("#fullImgCont").is(":visible")&&($("#fullImgCont").fadeOut(300,function(){$(this).removeAttr("style"),$(this).empty()}),$("#titlePopup").is(":visible")&&$("#bodyMask").css("z-index",""),$("#nowPlayCont").is(":visible")||TX.hideMask(),$("#playerMask").is(":visible")&&TX.hidePlayerMask())}function adjustTitlePopupPosition(){$("#titlePopup").center(!0,0,0,!1,"window")}function getTitleForPopup(t,e,a){if(!t.tid||isNaN(parseInt(t.tid)))return!1;showLoader();var l=t.base+t.tid+"?rpc=1&view="+t.view;$(".ttl-pu-nav").hide(),a&&(0!=e&&$("#ttlPuPrev").show(),void 0!=e&&e!=a-1&&$("#ttlPuNext").show()),$.ajax({url:TX.callScript+l,type:"GET",success:function(t){TX.showMask(),$("#ttlPuCont").empty().html($(t).find("data").text()),adjustTitlePopupPosition(),$("#titlePopup").fadeIn(200),hidePlaylist(),enableTitlePopup(),TX.popupBusy=!1,hideLoader()}})}function enableTitlePopup(){TX.applyViewClasses("#ttlPuCont"),$("#ttlPuCont a").click(function(){return TX.handleClick(this),!1}),enableTrackList($("#ttlPuCont")),arrangeTrackList("#ttlPuCont"),mainPlaylist.enablePlayAll("#ttlPuCont"),enableTpopupShares(),$("#ttlPuCont .btns .com-buy").click(function(){var t=TX.getEvalObjFromData($(this),"cart");add2cart(t,$(this))}),$("#ttlPuCont .btns .cart-alt").click(function(){showCartAlt(this,$("#titlePopup .ttl-block"))}),$("#titlePopup .t-image").click(function(){1!=TX.viewID&&($("#fullImgCont").is(":visible")?hideFullImage():imageToFull("#titlePopup .t-image"))}),$("#ttlPuClose").unbind().click(function(){hideTitlePopup()}),TX.revealInitInvis()}function showTitlePopup(t){function e(){r>0?(r--,o.tid=n[r],getTitleForPopup(o,r,n.length)):TX.popupBusy=!1}function a(){r<n.length-1?(r++,o.tid=n[r],getTitleForPopup(o,r,n.length)):TX.popupBusy=!1}function l(){TX.popupBusy||(TX.popupBusy=!0,setTimeout(function(){e()},300))}function i(){TX.popupBusy||(TX.popupBusy=!0,setTimeout(function(){a()},300))}if(!t)return!1;var o=TX.getEvalObjFromData(t);if(!o)return!1;$("#ttlPuCont").empty();var n=[],r=0;o.clustId&&$("#"+o.clustId).length>0&&(n=$("#"+o.clustId).val().split(","),$.isArray(n)&&n.length>1&&(r=$.inArray(o.tid,n),-1!=r&&($("#ttlPuNext").unbind().mousedown(function(){return!1}),$("#ttlPuPrev").unbind().click(function(){l()}),$("#ttlPuNext").unbind().click(function(){i()}),TX.popupKeysMapped||$(document).keydown(function(t){$("input,textarea,select").is(":focus")||t.ctrlKey||t.metaKey||(188==t.keyCode&&$("#titlePopup").is(":visible")&&(t.preventDefault(),l()),190==t.keyCode&&$("#titlePopup").is(":visible")&&(t.preventDefault(),i())),TX.popupKeysMapped=!0})))),getTitleForPopup(o,r,n.length)}function hideTitlePopup(){$("#titlePopup").is(":visible")&&($("#titlePopup").fadeOut(100,function(){$("#ttlPuCont").empty(),TX.hideMask()}),$("#titlePopup .ttl-pu-nav").hide())}function enableTitleGridItems(t){var e=function(t,e){if(!TX.stateHolders.gridFlyBusy){if($(".grid-fly",t).is(":visible"))return $(".grid-fly",t).hide(),$(".fly-btn",t).removeClass("flip").addClass("no-flip"),void(TX.stateHolders.gridFlyBusy=!1);TX.stateHolders.gridFlyBusy=!0,$(".grid-fly",t).css("height","0px").show(0),$(".grid-fly",t).stop(!0,!0).delay(e).animate({height:"40px"},150,function(){TX.stateHolders.gridFlyBusy=!1}),$(".fly-btn",t).removeClass("no-flip").addClass("flip")}};TX.isMobile||$(t+" .grid-item").mouseenter(function(){TX.viewID>=4&&e(this,150)}),$(t+" .grid-item").mouseleave(function(){$(".grid-fly",this).stop(!0,!0).removeAttr("style"),$(".fly-btn",this).removeClass("flip no-flip"),TX.stateHolders.gridFlyBusy=!1}),$(t+" .grid-item .fly-btn").click(function(){e($(this).parent(),0)}),TX.isMobile||$(t+" .grid-item .fly-btn").mousedown(function(t){t.preventDefault()}),$(t+" .grid-item .i-info").click(function(){showTitlePopup(this)}),enableTitleGridPlay(t),hiliteTrackRow()}function arrangeTitleGrids(){TX.viewID<=3?$(".ttl-cont .more-from-cont").length>0&&$(".more-from-cont").detach().insertAfter(".ttl-cont"):0==$(".ttl-cont .more-from-cont").length&&$(".more-from-cont").detach().appendTo(".ttl-cont")}function enableExpandableCont(t,e){var a,l;l=e.toString()+"px",$(t+" .com-exp-cont").length>0&&(a=$(t+" .com-exp-cont").height(),a>e?($(t+" .com-exp-cont").css({height:l,visibility:"visible"}),$(t+" .com-exp-bar").show(),$(t+" .com-exp-bar").click(function(){$(this).hasClass("expanded")?($(t+" .com-exp-cont").animate({height:l},400,"easeOutCubic",function(){}),$(t+" .com-exp-cont").removeClass("expanded"),$(this).removeClass("expanded")):($(t+" .com-exp-cont").animate({height:$(t+" .com-exp-cont").get(0).scrollHeight+"px"},400,"easeOutCubic",function(){$(this).css("height","auto")}),$(t+" .com-exp-cont").addClass("expanded"),$(this).addClass("expanded"))})):($(t+" .com-exp-cont").css({height:"auto",visibility:"visible"}).addClass("expanded"),$(t+" .com-exp-bar").hide()))}function enableTrackList(t,e,a){var l,i="#"+t.prop("id");void 0!=e&&e||(e="track"),$(".trk-row .fly-btn",t).click(function(){$(".menu-fly",$(this).parent()).is(":visible")?($(".menu-fly",$(this).parent()).hide(),$(this).removeClass("flip")):(TX.isMobile&&$(".trk-row .fly-btn",t).removeClass("flip"),$(".trklist .menu-fly").removeAttr("style"),$(this).addClass("flip"),$(".menu-fly",$(this).parent()).show())}),TX.isMobile||$(".trk-row",t).mouseleave(function(t){void 0!=t.target.type&&"select-one"==t.target.type||$(t.target).hasClass("cart-alt")||$("#cartAltCont").is(":visible")||$(t.target).hasClass("com-follow")||$(".com-drop-menu").is(":visible")||($(".fly-btn",this).removeClass("flip"),$(".menu-fly",this).stop(!0,!0).removeAttr("style"))}),$(".trk-row .fly-btn",t).mousedown(function(t){t.preventDefault()}),$(".com-drop-menu",t).length>0&&($(".com-follow.sm",t).click(function(){1==TX.viewID&&(TX.showMask(),$(".trk-drop-menu",$(this).parent().parent()).center(!0)),$(".trk-drop-menu",t).not($(".trk-drop-menu",$(this).parent().parent())).hide(),$(".trk-drop-menu",$(this).parent().parent()).show()}),$(".trk-drop-menu .com-close",t).click(function(){TX.hideMask(),$(this).parent().hide()}),$(".follow",t).length>0&&$(".follow",t).click(function(){followEntity($(this))})),enableTtlTrackListPlay(e,i),!a&&$(".trklist .com-buy:not(.free-upg)",t).length>0&&($(".trklist .com-buy:not(.free-upg)",t).click(function(){var t=TX.getEvalObjFromData($(this),"cart");add2cart(t,$(this))}),l="#ttlPuCont"==i?$("#titlePopup .trklist"):!1,$(".trklist .cart-alt",t).click(function(){showCartAlt(this,l)})),$(document).on("viewChange",function(){$(".com-drop-menu",t).removeAttr("style")}),hiliteTrackRow()}function arrangeTrackList(t){TX.viewID<=2?0==$(t+" .trk-row:not(.hdr) .artit-cont > .trk-cell").first().length&&$(t+" .trklist .trk-row:not(.hdr)").each(function(){$(".title, .artists",this).detach().appendTo($(".artit-cont",this)),$(".btncell > *",this).detach().appendTo($(".menu-fly",this))}):$(t+" .trk-row:not(.hdr) .artit-cont > .trk-cell").first().length>0&&$(t+" .trklist .trk-row:not(.hdr)").each(function(){
$(".title, .artists",this).detach().insertAfter($(".artit-cont",this)),$(".menu-fly > *",this).detach().appendTo($(".btncell",this))})}function enablePager(){function t(t){var e,a,l,i;e=/[\?,&]page=\d*/i,a=location.pathname+location.search,l=a.match(e),l&&l.length>0&&(a=a.replace(l[0],"")),i=-1==a.indexOf("?")?"?":"&",a+=i+"page="+t,TX.pushPath(a)}$(".pager").length>0&&$(".pager a").click(function(){t($(this).data("pg"))}),$("#pageJumpFrm").length>0&&$("#pageJumpFrm").submit(function(e){return e.preventDefault(),t($("#pageJump").val()),!1})}function siteUnloadProcedure(){TX.isUnloaded||(TX.isUnloaded=!0,updatePl2localStore()),$("#tsjp1").data("jPlayer").status.paused||mainPlaylist.pause()}function get_wav_gen_stat(){var t,e,a=1;$.ajax({url:TX.handlerScript+"?act=dlp",type:"GET",success:function(l){if($(l).find("response").length>0){if(t=$(l).find("response").text(),"1"!=t)return void(TX.WAVtrig&&(TX.hideBottomBar(),e='<span style="color: #5cf;">Your WAV files have completed! Your downloads list will now be refreshed and you should now see your WAV file links.</span>',TX.showMessage(e,{title:"WAVs Complete!"}),setTimeout("get_dl_links()",2e3)));TX.WAVtrig=!0,e='<span style="color: #5cf;">You have some WAV files currently generating... we will inform you when they are complete in just a few seconds.</span>',TX.showBottomBar(e),0==$(".dl-list").length&&$(".dl-choice-cont").html('<div style="text-align:center; font-size: 11pt">'+e+"</div>"),20>a?setTimeout("get_wav_gen_stat()",1e4):TX.hideBottomBar(),a++}}})}function reCenterMsgPopups(){$(".com-popup:visible").length>0&&TX.centerElementToWin(".com-popup:visible"),$("#loginFormCont").is(":visible")&&TX.viewID>=2&&$("#loginFormCont").center(!0)}function rePosBottomBar(){$("#bottomBarPopup").is(":visible")&&TX.positionBottomBar()}function procKeyCommand(t){if(!$("input,textarea,select").is(":focus")){var e;if(mainPlaylist.playlist.length>0){if(38==t.keyCode)return t.preventDefault(),void mainPlaylist.previous();if(40==t.keyCode)return t.preventDefault(),void mainPlaylist.next();if(39==t.keyCode)return t.preventDefault(),$currentPlayheadPercent=$("#tsjp1").data("jPlayer").status.currentPercentAbsolute,void($currentPlayheadPercent<100-TX.scrubPercent&&$("#tsjp1").jPlayer("playHead",$currentPlayheadPercent+TX.scrubPercent));if(37==t.keyCode)return t.preventDefault(),$currentPlayheadPercent=$("#tsjp1").data("jPlayer").status.currentPercentAbsolute,void($currentPlayheadPercent>TX.scrubPercent?$("#tsjp1").jPlayer("playHead",$currentPlayheadPercent-TX.scrubPercent):$("#tsjp1").jPlayer("playHead",0));if(32==t.keyCode)return t.preventDefault(),void(0==$("#tsjp1").data("jPlayer").status.paused?mainPlaylist.pause():mainPlaylist.play());if(80==t.keyCode)return void($("#nowPlayCont").is(":visible")?hidePlaylist():showPlaylist());if(67==t.keyCode)return t.preventDefault(),void add2cart($("#playerTitleInfo #plrsBuy").data("cart"),$("#playerTitleInfo #plrsBuy"));if(87==t.keyCode)return mainPlaylist&&0!=mainPlaylist.playlist.length?void add2cart($("#playerTitleInfo #plrsBuy").data("cart"),$("#playerTitleInfo #plrsBuy"),"1"):!1;if(46==t.keyCode||88==t.keyCode)return t.preventDefault(),void mainPlaylist.remove(mainPlaylist.current)}73!=t.keyCode||t.ctrlKey||t.metaKey||($("#titlePopup").is(":visible")?hideTitlePopup():$(".grid-fly .i-info").length>0&&(e=$(".grid-fly .i-info").filter(":visible").length>0?$(".grid-fly .i-info").filter(":visible"):$(".grid-fly .i-info").first(),showTitlePopup(e)))}}function getInitCpoData(){var t=$("#bodyBay").attr("data-init_cpo");TX.putPageCartData(t)}!function(t,e){"$:nomunge";var a,l=t.jQuery;l.throttle=a=function(t,a,i,o){function n(){function l(){s=+new Date,i.apply(c,u)}function n(){r=e}var c=this,p=+new Date-s,u=arguments;o&&!r&&l(),r&&clearTimeout(r),o===e&&p>t?l():a!==!0&&(r=setTimeout(o?n:l,o===e?t-p:t))}var r,s=0;return"boolean"!=typeof a&&(o=i,i=a,a=e),l.guid&&(n.guid=i.guid=i.guid||l.guid++),n},l.debounce=function(t,l,i){return i===e?a(t,l,!1):a(t,i,l!==!1)}}(this),!function(t){function e(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var a=t.originalEvent.changedTouches[0],l=document.createEvent("MouseEvents");l.initMouseEvent(e,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(l)}}if(t.support.touch="ontouchend"in document,t.support.touch){var a,l=t.ui.mouse.prototype,i=l._mouseInit,o=l._mouseDestroy;l._touchStart=function(t){var l=this;!a&&l._mouseCapture(t.originalEvent.changedTouches[0])&&(a=!0,l._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},l._touchMove=function(t){a&&(this._touchMoved=!0,e(t,"mousemove"))},l._touchEnd=function(t){a&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),a=!1)},l._mouseInit=function(){var e=this;e.element.bind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),i.call(e)},l._mouseDestroy=function(){var e=this;e.element.unbind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),o.call(e)}}}(jQuery),function(t){t.widget("traxsource.radioSet",{options:{valueElement:void 0,radioClass:"radio-switch",selectedClass:"checked",dataName:"radio",current:!1,original:!1,change:function(){}},_init:function(){var e=this;e.createEvents(),t("."+e.options.radioClass).each(function(){t(this).hasClass(e.options.selectedClass)&&(e.current=e.original=t(this).data(e.options.dataName),t(e.options.valueElement).val(e.original))})},createEvents:function(){var e,a=this;t("."+a.options.radioClass).unbind().click(function(){t("."+a.options.radioClass).removeClass(a.options.selectedClass),e=t(this).data(a.options.dataName),t(a.options.valueElement).val(e),t(this).addClass(a.options.selectedClass),e!=a.original&&(a.current=e,a.options.change(this))})},reset:function(){var e=this;t("."+e.options.radioClass).removeClass(e.options.selectedClass),t("."+e.options.radioClass+'[data-radio="'+e.original+'"]').addClass(e.options.selectedClass)}})}(jQuery),jQuery.fn.center=function(t,e,a,l,i){var o,n,r=63;return void 0===l&&(l=window),void 0===i?i=l:"window"==i&&(i=window),e=e?e:0,a=a?a:0,o=Math.max(0,($(i).height()-$(this).outerHeight())/2+e),n=Math.max(0,($(l).width()-$(this).outerWidth())/2+a),void 0!=t&&t||(o+=$(i).scrollTop(),n+=$(l).scrollLeft()),i!==!1&&(i==window&&r>o&&(o=r),this.css("top",o+"px")),l!==!1&&this.css("left",n+"px"),this},dropBoxTransfer=function(){},dropBoxTransfer.prototype={files:[],traxTransId:!1,traxBtnIndex:0,traxMultiBatch:!1,traxInstanceComplete:!1,traxBtnLockInit:!1,traxCheckBtnLock:function(){this.traxBtnLockInit||(TX.stateHolders.dropBoxBtnLock=!1,$(".dropbox-btn.whole").length>1&&$(".dropbox-btn.whole").removeClass("locked"),this.traxBtnLockInit=!0)},success:function(){var t;this.files.length>0&&(this.traxInstanceComplete=!0),this.files.length>0&&(t=this.traxMultiBatch?"batch":"order",TX.showBottomBar("Completed! Your <b>"+t+" of "+this.files.length+" track(s)</b> was saved to your Dropbox.")),this.traxTransId&&TX.dropBoxOrders.hasOwnProperty(this.traxTransId)&&(TX.dropBoxOrders[this.traxTransId][this.traxBtnIndex]="completed"),renderDboxStatuses()},progress:function(){this.traxCheckBtnLock()},cancel:function(){this.traxTransId&&TX.dropBoxOrders.hasOwnProperty(this.traxTransId)&&(delete TX.dropBoxOrders[this.traxTransId][this.traxBtnIndex],renderDboxStatuses()),this.traxCheckBtnLock()},error:function(t){TX.showMessage("Dropbox Error: "+t,{title:"We're sorry",showAsError:!0}),this.traxTransId&&TX.dropBoxOrders.hasOwnProperty(this.traxTransId)&&(delete TX.dropBoxOrders[this.traxTransId][this.traxBtnIndex],renderDboxStatuses()),this.traxCheckBtnLock()}},TX=new Traxsource,TX._init(),TX.verifyBrowser(),TX.useDummyPlay=TX.isMobile||TX.isSafari11plus,TX.useDummyPlay&&(TX.initPlaylist=TX.dummyPlItem),window.addEventListener("unhandledrejection",function(t){t.preventDefault()}),TX.isBot||TX.browserAccepted?TX.startURL():location.href="/browser_bad.html",throttPlaylistHeaders=$.debounce(100,adjustPlHeaders),throttRecenterPopups=$.debounce(200,reCenterMsgPopups),throttImgFullScroll=$.debounce(500,!0,hideFullImage),throttPosBottomBar=$.throttle(300,rePosBottomBar),throttCartAltScroll=$.debounce(500,!0,hideCartAlt),throttCartAltPos=$.debounce(100,positionCartAlt),$(function(){function t(){hidePlaylist(!0),closeLoginForm(),c(),verticalShiftHandler(),n(),a(),hidePlayerPopups(),hideTitlePopup(),hideFullImage(),hideKeyCommands(),hideCartAlt()}function e(){throttPlaylistHeaders(),throttRecenterPopups(),throttPosBottomBar(),throttCartAltPos()}function a(){$(".srch-cancel").hasClass("show")&&($(".srch-cancel").removeClass("show"),$(".search-bay").stop().animate({top:"-58px"},200)),$(".search-sugg").hide()}function l(){$(".search-bay .search-input").autocomplete({source:function(t,e){TX.suggXHR&&TX.suggXHR.abort(),TX.suggXHR=$.ajax({url:TX.searchScript+"?act=suggest&term="+encodeURIComponent(t.term),type:"GET",success:function(t){if(TX.suggXHR=!1,t){t=t.replace(/\\"/g,"");var a=TX.getEvalObj(t);e(a)}}})},delay:150,minLength:2,classes:{"ui-autocomplete":"search-sugg v-"},select:function(t,e){$(".search-bay .search-input").val(e.item.value),$("#mainSearch").submit(),$(".search-bay .search-input").autocomplete("destroy")},position:{my:"left top+15",at:"left bottom",collision:"fit"}})}function i(){$(".user-dropdown").delay(100).slideDown(150),hidePlaylist(!0)}function o(){$(".user-dropdown").stop(!0,!0).slideUp(150)}function n(){TX.viewID<=3?0==$(".header-menu .menu-cont").length&&$(".menu-cont").detach().appendTo(".header-menu"):$(".header-menu .menu-cont").length>0&&$(".menu-cont").detach().appendTo("#menuBay").removeAttr("style")}function r(t){$(t).stop(!0,!0).delay(100).slideDown(200,"easeInCirc")}function s(t){$(t).stop(!0,!0).slideUp(100)}function c(){TX.viewID<=2?(0==$("#v1WfInfoCont #PlTtlInfo").length&&($("#PlTtlInfo").detach().prependTo("#v1WfInfoCont"),$("#PWFCont").detach().appendTo("#v1WfInfoCont")),$("#artitBr").hide()):($("#v1WfInfoCont #PlTtlInfo").length>0&&($("#PlTtlInfo").detach().insertAfter("#playerTitleInfo .img-cont"),$("#PWFCont").detach().insertAfter("#v1WfInfoCont")),$("#artitBr").removeAttr("style")),TX.viewID<=2&&($("#plControl .np-br").length>0&&$("#plyrPl2UchBtn").detach().insertAfter(".np-btns .sharebox-inline"),$("#nowPlayTtl .np-btns").addClass("com-drop-menu"),$(".jp-interface  #plrsFollows").length>0&&$("#plrsFollows").detach().appendTo("#compactFollCont")),TX.viewID>=3&&(0==$("#plControl .np-br").length&&$("#plyrPl2UchBtn").detach().appendTo("#plControl"),$("#nowPlayTtl .np-btns").removeClass("com-drop-menu"),$("#compactFollCont #plrsFollows").length>0&&$("#compactFollCont #plrsFollows").detach().appendTo(".jp-interface .ttl-drop-menu"))}function p(t){return TX.noxd?!1:void $.ajax({url:"https://plog.traxsource.com/"+t+tidyUUID,type:"GET"})}function u(t){var e,a,l,i,o,n,r=[];$("#cartAltCont").parents("#playerTitleInfo, #nowPlayTtl").length>0&&hideCartAlt(),isNaN(t.price)?(a="",n=t.r_date,t.preorder&&t.preorder.hasOwnProperty("int")&&10==t.preorder["int"].toString().length&&(now=Math.floor(Date.now()/1e3),pubDate=t.preorder["int"],pubDate>now&&(a="pre-ord",n='<span class="pre-ord-txt">Pre-Order for '+t.preorder.display+"</span>")),t.price.hasOwnProperty("zip")?(e="$"+t.price.zip,l=9):t.price.hasOwnProperty("stems")?(e="$"+t.price.stems,l=4):1==TX.currentBitrate&&t.price.hasOwnProperty("hbr")?(e="$"+t.price.hbr,l=TX.currentBitrate):(e="$"+(t.price.hasOwnProperty("wav")?t.price.wav:t.price.hbr),l=TX.currentBitrate),t.bought&&(a+=" bought")):(a="alb-only",e=""),r=renderArtLabLinks(t.artist,t.label),i=t.track_url?t.track_url:"/track/"+t.track_id,o=!1,t.keysig&&t.keysig.length>2&&(o=t.keysig),o&&t.bpm&&t.bpm.length>2?o+="  "+t.bpm:o=!1,o?($("#plrsKeyBPM").html(o),$(".jp-progress .key-bpm").show(),o=o.replace(" ","| "),$("#plrnpKeyBPM").html(o+" | ")):($("#plrnpKeyBPM").html(""),TX.hideByFade(".jp-progress .key-bpm")),$("#plrsImgLink img.pinfo-image").remove(),$("#plrsImgLink").prepend('<img class="pinfo-image" src="../../../public/js/'+t.thumb+'" />'),$("#plrsImgLink").attr("href",i),$("#plrsTitle").attr("href",i),$("#plrsTitle").html(t.title),$("#plrsArtists").html(r.al.join(", ")),$("#plrsLabel").html(r.ll),$("#plrsRelDate").html(" | "+t.r_date+" | "),$("#plrsDur").html(t.duration+" | "),$("#plrsGenre").html(t.genre),$("#plrsGenre").attr("href",t.genre_url),$("#PlTtlInfo a, #plrsImgLink").unbind("click").click(function(){return TX.handleClick(this),!1}),$("#plrsFollows").empty().html(r.fl.join(" ")),$("#plrsFollows .follow").unbind("click").click(function(){followEntity($(this))}),"alb-only"==a?($("#playerTitleInfo .alb-only").show(),$("#playerTitleInfo .buy-cont").hide(),$("#playerTitleInfo #plrsBuy").unbind("click")):($("#plrsPrice").html(e),$("#plrsBuy").parent().removeClass("bought pre-ord added"),$("#plrsBuy").parent().addClass(a),$("#plrsBuy").data("cart",{title_id:t.title_id,track_id:t.track_id,bitrate:TX.currentBitrate}),$("#playerTitleInfo .buy-cont").show(),$("#playerTitleInfo .alb-only").hide(),$("#playerTitleInfo #plrsBuy").unbind("click").click(function(){add2cart($(this).data("cart"),$(this))}),$("#playerTitleInfo .cart-alt").unbind("click").click(function(){showCartAlt(this,$(this).parent().parent())})),hidePlayerPopups(),$(".utl-drop-cont").empty(),$("#plrnpImg").html(" "),$("#plrnpImg").html('<img src="../../../public/js/'+t.image+'" />'),$("#plrnpTitle a").attr("href",i).html(t.title),$("#plrnpArtists").html(r.al.join(", ")),$("#plrnpLabel").html(r.ll),$("#pltnpCatnum").html(t.catnumber+" | "),$("#plrnpRelDate").html(t.r_date+" | "),$("#plrnpDur").html(t.duration+" | "),$("#plrnpGenre").html(t.genre),$("#plrnpGenre").attr("href",t.genre_url),$("#plrnpTtlUrl").attr("href",t.title_url),$("#nowPlayTtl .plinkable a").unbind("click").click(function(){return TX.handleClick(this),!1}),"alb-only"==a?($("#nowPlayTtl .alb-only").show(),$("#nowPlayTtl .buy-cont").hide(),$("#nowPlayTtl #plrnpBuy").unbind("click")):($("#plrnpPrice").html(e),$("#plrnpBuy").parent().removeClass("bought pre-ord added"),$("#plrnpBuy").parent().addClass(a),$("#plrnpBuy").data("cart",{title_id:t.title_id,track_id:t.track_id,bitrate:TX.currentBitrate}),$("#nowPlayTtl .buy-cont").show(),$("#nowPlayTtl .alb-only").hide(),$("#nowPlayTtl #plrnpBuy").unbind("click").click(function(){add2cart($(this).data("cart"),$(this))}),$("#nowPlayTtl  .cart-alt").unbind("click").click(function(){showCartAlt(this,$(this).parent().parent())})),$(".jp-playlist-current .buy-cont").hasClass("added")&&np_pi2added(),$("#nowPlayTtl .pl-remove-btn").unbind("click").click(function(){mainPlaylist.remove(mainPlaylist.current)}),$(".promo, .pre-ord-img, .pre-ord-promo-img",$("#playerBay")).hide(),t.promo&&t.preorder?$("#playerBay .pre-ord-promo-img").show():t.promo?$("#playerBay .promo").show():t.preorder&&$("#playerBay .pre-ord-img").show(),enablePlayerShares(t),hiliteTrackRow(),mainPlaylist.traxsource.options.isFirstPlay||p(t.track_id)}$(document).on("viewChange",function(){t()}),TX.widthHolder=$(window).width(),$(window).resize(function(){TX.widthHolder!=$(window).width()&&(TX.widthHolder=$(window).width(),TX.checkSizesGlobal()),e()}),$(window).scroll(function(){throttImgFullScroll(),throttPosBottomBar()}),getCurrBitrate(),$.ajaxSetup({cache:!0}),getInitCpoData(),$(document).keydown(function(t){TX.keyComTimeout||(TX.keyComTimeout=!0,procKeyCommand(t),setTimeout(function(){TX.keyComTimeout=!1},150))}),$("#playerKeyLegendBtn").click(function(){return $("#keyComCont").is(":visible")?void hideKeyCommands():($("#keyComImg").html().length<5&&$("#keyComImg").html('<img src="/img/key_commands.png" class="keycomm-img">'),TX.showMask(),void $("#keyComCont").fadeIn(300,function(){$("#keyComCont").center(!0)}))}),$("#keyComCont .kc-close").click(function(){hideKeyCommands()}),$("#keyComCont img").mousedown(function(t){t.preventDefault()}),$("html").click(function(t){t.stopPropagation(),0==$(t.target).closest("#playerBay").length&&0==$(t.target).closest("#headerBay").length&&($(t.target).parent().hasClass("utl-menu-item")||"fullImgCont"==$(t.target).parent().prop("id")||"cartAltCont"==$(t.target).parent().attr("id")||-1!=$(t.target)[0].className.indexOf("cart-alt-cart")||hidePlaylist()),$(t.target).hasClass("cart-alt")||0!=$(t.target).closest("#cartAltCont").length||hideCartAlt()}),$("#mainBay,#bottomBay").click(function(t){$(t.target).is("#titlePopup *")||$(t.target).hasClass("mspu-close")||$(t.target).hasClass("embed-close")||$(t.target).is("#fullImgCont *")||-1!=$(t.target)[0].className.indexOf("cart-alt-cart")||hideTitlePopup(),$(t.target).is(".com-popup,.com-popup *")||($(t.target).hasClass("no-login-close")||closeLoginForm(),$(t.target).is(".t-image *, .al-image *")||hideFullImage(),"keyComImg"!=t.target.id&&hideKeyCommands(),"bodyMask"==t.target.id&&$("#bodyMask").is(":visible")&&($("#titlePopup").is(":visible")||0!=$(".com-popup:visible").length||TX.hideMask()),$(".com-drop-menu").removeAttr("style"))}),$(document).bind("ajaxStart",function(){$("html").addClass("busy"),setTimeout(function(){$("html").trigger("mousemove")},500),TX.stateHolders.busyTimeout=setTimeout(function(){$("html").removeClass("busy")},2e4)}),$(document).bind("ajaxStop",function(){$("html").removeClass("busy"),setTimeout(function(){$("html").trigger("mousemove")},500),clearTimeout(TX.stateHolders.busyTimeout)}),$(document).ajaxError(function(){$("html").removeClass("busy"),setTimeout(function(){$("html").trigger("mousemove")},500),clearTimeout(TX.stateHolders.busyTimeout)}),TX.cloader=new CanvasLoader("mainBay"),TX.cloader.setColor("#147ce4"),TX.cloader.setShape("spiral"),TX.cloader.setDiameter(63),TX.cloader.setDensity(61),TX.cloader.setRange(.9),TX.cloader.setSpeed(3),TX.cloader.setFPS(34),window.showLoader=function(){TX.cloader.show(),$("#canvasLoader").center(!0,0)},window.hideLoader=function(){setTimeout(function(){TX.cloader.hide()},0)},$(".search-btn .alt-btn").click(function(){$(".search-bay").stop().animate({top:"0px"},200,function(){$(".srch-cancel").addClass("show")}),$(".search-input").focus()}),$(".srch-cancel .hdrlnk").click(function(){a()}),$(".search-bay").click(function(){$(".search-input").focus()}),$("#mainSearch").submit(function(){return TX.suggXHR&&TX.suggXHR.abort(),TX.suggXHR=!0,$(".search-bay .search-input").val().length<2?!1:(TX.pushPath($(this).attr("action")+"?"+$(this).serialize()),setTimeout(function(){l()},1e3),a(),!1)}),l(),$("#loginLnk").click(function(){showLogin()}),$("#loginFormCont .com-close").click(function(){closeLoginForm()}),$("#logoutLnk").click(function(){$.ajax({url:"/scripts/handler.php?act=logout",type:"GET",success:function(t){"0"==$(t).find("code").text()&&(window.location.href="/")}})}),$("#headerBay a:not(.cart-dd-link)").click(function(){return TX.handleClick($(this)),!1}),TX.isMobile||$(".header-user").mouseenter(function(){TX.viewID>=4&&!$("#nowPlayCont").is(":visible")&&i()}),$(".header-user").mouseleave(function(){o()}),$(".user-drop").click(function(){$(".user-dropdown").is(":visible")?o():i(),hideMenu()}),$(".user-dropdown a").click(function(){o()}),updateGlobalCarts(!1,!1),TX.getDefaultCart(),TX.isMobile||$(".header-cart").mouseenter(function(){TX.viewID>=4&&!$("#nowPlayCont").is(":visible")&&showCartMenu()}),$(".header-cart").mouseleave(function(){hideCartMenu()}),enableUserBarCartMenu(),$("#cartAltClose").click(function(){hideCartAlt()}),$("#menuDivGenres a.flt").length%2!=0&&$("#menuDivGenres .mn-split:last").append('<div class="dummy-a flt"></div>'),TX.isMobile||($("#menuBtnGenres").mouseenter(function(){TX.viewID>=4&&r("#menuDivGenres")}),$("#menuBtnFeat").mouseenter(function(){TX.viewID>=4&&r("#menuDivFeat")}),$("#menuBtnMTS").mouseenter(function(){TX.viewID>=4&&r("#menuDivMts")})),$(".header-menu").mouseleave(function(){hideMenu()}),$("#menuLiGenres").mouseleave(function(){s("#menuDivGenres")}),$("#menuLiFeat").mouseleave(function(){s("#menuDivFeat")}),$("#menuLiMts").mouseleave(function(){s("#menuDivMts")}),$(".header-menu .menu-btn").click(function(){$(".menu-cont").is(":visible")?hideMenu():(showMenu(),o(),hidePlaylist(!0))}),$("#menuBtnGenres").click(function(){$("#menuDivGenres").toggle()}),$("#menuBtnFeat").click(function(){$("#menuDivFeat").toggle()}),$(".menu-cont a").click(function(t){return $(this).hasClass("ext")?!0:(t.target.href.indexOf("void(0)")<0&&hideMenu(),$(this).hasClass("flt")&&($(this).parents(".menu-floater:first").hide(),hideMenu()),TX.handleClick($(this)),!1)}),PWF=new Waveform("PWFCont"),PWF.resizeTimeoutWait=300,getInitVolume(),mainPlaylist=new jPlayerPlaylist({jPlayer:"#tsjp1",cssSelectorAncestor:"#tsjpcont1"},TX.initPlaylist,{playlistOptions:{enableRemoveControls:!0,removeItemClass:"com-remove",itemClass:"playlist-item",preload:"auto",autoPlay:!1},swfPath:"/js",supplied:"mp3",wmode:"window",volume:TX.volumeInitVal/100,loadeddata:function(t){PWF.getWaveForm(t.jPlayer.status.media.waveform)},timeupdate:function(t){TX.currentPlayTime=t.jPlayer.status.currentTime,PWF.progress=t.jPlayer.status.currentPercentAbsolute,PWF.drawWaveform()},loadstart:function(){$(".loading-svg").addClass("rotate"),$(".pl-loader").show(),TX.stateHolders.plLoaderTimeout=setTimeout(function(){$(".pl-loader").hide(),$(".loading-svg").removeClass("rotate")},5e3)},canplay:function(){clearTimeout(TX.stateHolders.plLoaderTimeout),setTimeout(function(){$(".pl-loader").hide(),$(".loading-svg").removeClass("rotate")},250)}}),$("#playlistExpand").click(function(){showPlaylist()}),$("#playlistCollapse").click(function(){hidePlaylist()}),TX.isMobile&&$("#plControl").click(function(){hidePlaylist()}),TX.isMobile||($("#volumeButton").click(function(){var t=$(this).offset(),e=t.left-65+8;$("#volumeBarCont").css("left",e+"px").show()}),$("#volumeBarCont").mouseleave(function(){$(this).delay(500).fadeOut(200)}),$("#volumeBarCont").mouseenter(function(){$(this).stop(!0,!0)}),$("#volumeBar").slider({value:TX.volumeInitVal,min:0,max:100,step:1,slide:function(t,e){$("#tsjp1").jPlayer("volume",e.value/100)},stop:function(t,e){e.value>5&&TX.setCookie("volume",e.value.toString(),365)}})),TX.isMobile&&$("#volumeButton").hide(),$(".jp-seek-bar, .jp-play-bar").click(function(){mainPlaylist.playlist.length&&$("#tsjp1").data("jPlayer").status.paused&&$("#tsjp1").jPlayer("play")}),$("#playerShareButton").click(function(){$("#playerBay .ttl-drop-menu").fadeIn(150)}),$("#playerBay #plrsFollows a").click(function(){followEntity($(this))}),$("#playerTitleInfo img ").mousedown(function(t){t.preventDefault()}),$("#tsjp1").on($.jPlayer.event.loadstart,function(t){u(t.jPlayer.status.media)}),$("#tsjp1").on($.jPlayer.event.ready,function(){getLocalPl2Playlist()}),$(".jp-seek-bar").touchwipe({wipeLeft:function(){mainPlaylist.next()},wipeRight:function(){mainPlaylist.previous()},preventDefaultEvents:!0}),$("#npPrev").click(function(){mainPlaylist.previous()}),$("#npNext").click(function(){mainPlaylist.next()}),$(".now-play-img-lnk").click(function(){imageToFull("#plrnpImg"),TX.showPlayerMask()}),$(".playlist-item.hdr").mousedown(function(t){t.preventDefault()}),$(window).on("beforeunload",function(){siteUnloadProcedure()}),window.uuid=!1,window.getUUID="",window.tidyUUID="",$("#uuid").length>0&&(window.uuid=$("#uuid").val(),getUUID="&uuid="+uuid,tidyUUID="/"+uuid),$(".add-to-utl-btn").click(function(){showUserTracklistDrop()}),$(".save-as-utl-btn").click(function(){savePlaylistAsTracklist()}),$(".clear-pl-btn").click(function(){clearPlaylist()}),$("#plrsImgLink").mousedown(function(t){t.preventDefault()}),$(".np-btns .com-close, #compactFollCont .com-close, .ttl-drop-menu .com-close, #playerMask").click(function(){hidePlayerPopups()}),$("#npBtnsMenuBtn").click(function(){$(".np-btns").is(":visible")||(TX.showPlayerMask(),$(".np-btns").center(!0,-58).slideDown(200))}),$("#npFollowBtn").click(function(){$("#compactFollCont").is(":visible")||(TX.showPlayerMask(),$("#compactFollCont").center(!0,-58).slideDown(200))}),TX.isMobile||$(".jp-playlist ul").sortable({axis:"y",tolerance:"pointer",delay:300,containment:".jp-playlist",update:function(){mainPlaylist.scan()}}),window.enableLeftListPlay=function(){mainPlaylist.enablePlayButtons("#topTenBay .com-play","LL",$("#ttCtype").val(),!0),mainPlaylist.enablePlayButtons("#topTenBay .com-pl","LL",$("#ttCtype").val(),!1),mainPlaylist.enablePlayAll($("#topTenBay"))},window.enableTitleGridPlay=function(t){var e=!1;$(".genre-id").length>0&&(e=$(".genre-id").data("gid")),mainPlaylist.enablePlayButtons(t+" .grid-fly .com-play","TG","title",!0,e),mainPlaylist.enablePlayButtons(t+" .grid-fly .com-pl","TG","title",!1,e)},window.enableTtlTrackListPlay=function(t,e){var a,l;a=t?t:"trid",l=t&&"tid"==t?"title":"track",mainPlaylist.enablePlayButtons(e+" .com-play","TL",l,!0),mainPlaylist.enablePlayButtons(e+" .com-pl","TL",l,!1)},window.enableMtsPlayAll=function(t){mainPlaylist.getPlayAllTracks(t,!0)},$("#bottomCont a:not(.ext)").click(function(){return TX.handleClick($(this)),!1}),$("#currConvert").click(function(){var t='<iframe src="https://finance.google.com/finance/converter?a=1&from=USD&to=GBP" width="300" height="170"><iframe>';TX.showMessage(t,{title:"Currency Converter"})}),$(".bbp-close").click(function(){TX.hideBottomBar()}),TX.checkSizesGlobal(),n(),c(),TX.viewChange=!1,TX.highlightMenu(),TX.isIE&&$.getScript(TX.staticHost+"/js/svg-handler.min.js",function(){svg4everybody()}),hideZendesk(),autoFillZendesk(),"function"==typeof zE&&(window.zESettings={webWidget:{contactForm:{subject:!0}}})});