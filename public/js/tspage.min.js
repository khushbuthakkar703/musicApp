function enablePageStarters(){hideZendesk(),TX.checkSizesGlobal(),TX.applyViewClasses(),TX.revealInitInvis()}function enablePageFrontGenre(){function t(){var t,e;t=function(t){TX.stateHolders.leftFlyBusy||($(".img-fly, .buy-fly",t.parent()).is(":visible")?(hideCartAlt(),$(".img-fly, .buy-fly",t.parent()).hide(),t.removeClass("flip").addClass("no-flip"),TX.stateHolders.leftFlyBusy=!1):(TX.stateHolders.leftFlyBusy=!0,$("#ttListCont .img-fly, #ttListCont .buy-fly").removeAttr("style"),$(".img-fly",t.parent()).show(),(TX.viewID<=3||!s)&&$(".buy-fly",t.parent()).show(),t.removeClass("no-flip").addClass("flip"),setTimeout(function(){TX.stateHolders.leftFlyBusy=!1},200)))},$(".top-item .fly-btn").click(function(){t($(this))}),TX.isMobile||$(".top-item").mouseenter(function(){TX.viewID>=4&&t($(".fly-btn",this))}),$(".top-item").mouseleave(function(){0!=$("#cartAltCont",this).length&&hideCartAlt(),$(".img-fly, .buy-fly",this).removeAttr("style"),$(".fly-btn",this).removeClass("flip no-flip"),TX.stateHolders.leftFlyBusy=!1}),TX.isMobile||$(".top-item .fly-btn").mousedown(function(t){t.preventDefault()}),$("#ttListCont a").click(function(){return TX.handleClick($(this)),!1}),$("#topTenBay .com-buy").click(function(){var t=TX.getEvalObjFromData($(this),"cart");add2cart(t,$(this))}),$("#topTenBay .cart-alt").click(function(){showCartAlt(this,$(this).parent().parent())}),$("#topTenBay .com-play-all, #topTenBay .com-pl-all").unbind().removeData("titles tracks"),e=$("#ttCtype").val()+"s",$("#topTenBay .com-play-all, #topTenBay .com-pl-all").data(e,$("#playAllIDs").val()),enableLeftListPlay()}function e(t){return 0==$(".grid-item",t).length?void $(t).hide():(r(t),".front-tab-grid"==t&&$(".front-tab-grid .com-tabs a").click(function(){var t=$(this);setTimeout(function(){var a,i;return a=TX.getEvalObjFromData(t),a&&""!=a.base?(i=a.base+"?rpc=1&view="+a.view,void $.ajax({url:TX.callScript+i,type:"GET",success:function(t){$(".front-tab-grid").empty().html($(t).find("data").text()),e(".front-tab-grid")}})):!1},500)}),$(".menu-btn",t).click(function(){$(".compact-mn-cont",t).is(":visible")?$(".compact-mn-cont",t).hide():$(".compact-mn-cont",t).slideDown(300)}),$(".com-grid, .compact-mn-cont").mouseleave(function(){$(".compact-mn-cont",t).hide()}),$(".grid-page",t).length>0&&$(".grid-cont",t).cycle({slides:"> .grid-page",timeout:0,pager:t+" .cycle-pager",pagerTemplate:"<div></div>",next:t+" .pager-LR.next",prev:t+" .pager-LR.prev",log:!1}),".front-tab-grid"==t&&1==$(".grid-page.cycle-slide:not(.cycle-sentinel)",t).length&&$(".tab-pager-cont").hide(),$(".links a, .com-see-all a, .bottom-see-all, .grid-image a, .grid-hdr a",t).click(function(){return TX.handleClick($(this)),!1}),enableTitleGridItems(t),void mainPlaylist.enablePlayAll(t))}function a(){if(TX.viewID<=2)0==$("#compactScabCont #leftScabBay").length&&$("#rightScabBay, #leftScabBay").detach().appendTo("#compactScabCont"),$("#compactScabCont").cycle({slides:"> div",timeout:5e3,pauseOnHover:!0,log:!1});else{var t=$("#compactScabCont").data("cycle.opts");void 0!=t&&$("#compactScabCont").cycle("destroy"),$("#compactScabCont .cycle-sentinel").remove(),$("#compactScabCont #leftScabBay").length>0&&($("#leftScabBay").detach().prependTo("#banScabBay"),$("#rightScabBay").detach().insertBefore("#compactScabCont"))}}function i(){TX.viewID<=3?(0==$(".fs-main #topTenBay").length&&$("#topTenBay").detach().insertBefore("#frontGridBay"),$("#topTenBay .top-item .img-fly a").first().length>0&&$("#topTenBay .top-item").each(function(){$(".img-fly a",this).detach().prependTo($(".buy-fly",this))})):($(".fs-main #topTenBay").length>0&&$("#topTenBay").detach().appendTo("#ttAndGridCont"),$("#topTenBay .top-item .buy-fly .com-play").first().length>0&&$("#topTenBay .top-item").each(function(){$(".buy-fly a.com-play, .buy-fly a.com-pl",this).detach().prependTo($(".img-fly",this))}))}function r(t){".front-tab-grid"==t&&(TX.viewID>=4?$(".front-tab-grid .compact-mn-cont .com-tabs").length>0&&$(".front-tab-grid .compact-mn-cont .com-tabs").detach().prependTo(".front-tab-grid").removeClass("cmenu"):0==$(".front-tab-grid .compact-mn-cont .com-tabs").length&&$(".front-tab-grid .com-tabs").detach().appendTo(".front-tab-grid .compact-mn-cont").addClass("cmenu"))}function n(){a(),i(),r(".front-djc-grid"),r(".front-tab-grid"),arrangeTitleGrids()}$(".genre-hdr .genre-id").html().length>0&&$(".genre-hdr").show();var s=!1;-1!=location.pathname.indexOf("dj-top-10s")&&(s=!0),$("#topTenTabBay a").click(function(){var e=$(this);setTimeout(function(){var a,i;return(a=TX.getEvalObjFromData(e))?(i=a.base+"?rpc=1&view="+a.view,void $.ajax({url:TX.callScript+i,type:"GET",success:function(a){$("#ttListCont").empty().html($(a).find("data").text()),t(),$("#topTenTabBay a").removeClass(),$(e).addClass("active-tab")}})):!1},500)}),$(".scab-left").cycle({slides:"> a",pagerTemplate:"<div></div>",timeout:6e3,pauseOnHover:!0,swipe:!0,swipeFx:"scrollHorz",log:!1}),$("#bannerBay .cycle-pager, .scab-left .cycle-pager").hide(),TX.isMobile||($("#bannerBay, .scab-left").mouseenter(function(){$(".cycle-pager",this).fadeIn(300)}),$("#bannerBay, .scab-left").mouseleave(function(){$(".cycle-pager",this).fadeOut(200)})),$("#bannerBay").cycle({slides:"> a",pagerTemplate:"<div></div>",timeout:5e3,pauseOnHover:!0,next:"#horizRightBtn",prev:"#horizLeftBtn",swipe:!0,swipeFx:"scrollHorz",speed:350,log:!1}),TX.isMobile||($("#bannerBay").mouseenter(function(){$("#bannerBay .horiz-ban-btn").fadeTo(300,1)}),$("#bannerBay").mouseleave(function(){$("#bannerBay .horiz-ban-btn").fadeTo(300,0)})),$("#banScabBay a, .scab-left a, .left-alt-scab a").click(function(){return"_blank"==$(this).attr("target")?!0:(TX.handleClick($(this)),!1)}),$(document).on("viewChange",function(){n()}),enablePageStarters(),t(),e(".front-djc-grid"),e(".front-tab-grid"),n()}function enableArtLabSubHandler(){$(".art-lab-hdr").length>0&&(enableExpandableCont(".art-lab-hdr",83),$(".al-cont .al-image").click(function(){1!=TX.viewID&&imageToFull(".al-cont .al-image")}),$("#artLabTabMenu a").length>0&&$("#artLabTabMenu a").click(function(){var t=$(this);setTimeout(function(){var e,a;return e=TX.getEvalObjFromData(t),e&&""!=e.base?(a=e.base,a+=TX.ippAppender(a),void TX.pushPath(a)):!1},500)}),location.pathname.indexOf("/djtop")<0&&$("#s_artist").unbind("click"),$(".al-cont .com-follow").click(function(){followEntity($(this))}))}function enablePageListPage(){function t(){var t,e,a,i,r,n,s;a=[],n=location.hash.length>1?location.hash.replace("#",""):location.pathname,t=/\?(.*)/,e=n.split(t),e[0]&&(n=e[0]),a.push("cn="+$("#pageFilter .view-mode a.active-f").prop("id")),$("#pageFilter .ipp .active-f").length>0&&a.push("ipp="+$("#pageFilter .ipp .active-f").data("ipp")),$("#pageFilter .rdate-filt .active-f").length>0&&("custom"==$("#pageFilter .rdate-filt .active-f").prop("id")?a.push("period="+$("#pStart").val()+","+$("#pEnd").val()):a.push("period="+$("#pageFilter .rdate-filt .active-f").prop("id"))),i=$("#pageFilter .genre-filt .active-f"),r=[],$(i).length>0&&$(i).each(function(t,e){r.push($(e).data("gid"))}),m&&p&&h&&-1==$.inArray(p,r)&&r.push(p),!h&&m&&a.push("gfd=0"),r.length>0&&a.push("gf="+r.join(",")),u&&u.ob&&u.ob.length>0&&a.push("ob="+u.ob),u&&u.so&&u.so.length>0&&a.push("so="+u.so),a.length>0&&(a.length>1?ahash=a.join("&"):ahash=a[0],s!=n+"?"+ahash&&(s=n+"?"+ahash),TX.pushPath(s))}function e(){$("#pageFilter .genre-filt a.active-f").length>0?$("#pageFilter .genre-clr").css("visibility","visible"):$("#pageFilter .genre-clr").css("visibility","hidden")}function a(){if(!u)return!1;var t,a;u.cn&&"tracks"==u.cn?($("#pageFilter #tracks").addClass("active-f"),$("#pageFilter .ipp-track").show()):($("#pageFilter #titles").addClass("active-f"),$("#pageFilter .genre-filt").hide(),$("#pageFilter .ipp-grid").show()),u.hideTabs&&$("#"+u.hideTabs).length>0&&$("#"+u.hideTabs).hide(),u.ipp&&!isNaN(u.ipp)&&$("#pageFilter #"+f+u.ipp).addClass("active-f"),u.hidePOFilter||(u.showPOs&&1==u.showPOs?$("#poOn").addClass("active-f"):$("#poOff").addClass("active-f"),$("#pageFilter .preord.fsect").show()),u.period&&u.period.length>0&&(d=u.period.split(","),2==d.length?(u.period="custom",$("#pStart").val(d[0]),$("#pEnd").val(d[1]),$("#pRange").show()):d=!1,$("#pageFilter #"+u.period).addClass("active-f"),$(".rdate-filt .fhdr").addClass("active")),u.hideWeeks&&$("#pageFilter #week, #pageFilter #last_week").hide(),u.isLogged||$("#pageFilter #login, #pageFilter #purchase").hide(),$("#pageFilter .g-btn").length>0&&$.isArray(u.gf)&&u.gf.length>0&&!isNaN(u.gf[0])&&(a=u.gf,$("#pageFilter .genre-filt a").each(function(t,e){for(i=0;i<a.length;i++)$(e).data("gid")==a[i]&&$(e).addClass("active-f")}),$(".genre-filt .fhdr").addClass("active")),u.ob&&u.ob.length>0&&($(".list-page .trklist .sort a").removeClass(),$(".list-page .trklist a#s_"+u.ob).length>0&&(t=u.so.length>0?" "+u.so:"",$(".list-page .trklist a#s_"+u.ob).addClass("sort"+t),$("#sortSelect").val(u.ob+" "+u.so))),e()}function r(){u&&(u.ob&&(u.ob=""),u.so&&(u.so=""))}function n(){$("#pageFilter .genre-filt a.active-f").length>0&&$("#pageFilter .genre-filt a").removeClass("active-f")}function s(){$("#pageFilter .rdate-filt a.active-f").length>0&&$("#pageFilter .rdate-filt a").removeClass("active-f")}function l(){TX.savedDateRange=[$("#pStart").val(),$("#pEnd").val()],d=!1,t()}function o(){TX.viewID<=3?"pageFilter"!=$(".list-page .list-tabs").next().prop("id")&&$("#pageFilter").detach().insertAfter(".list-page .list-tabs"):"pageFilter"==$(".list-page .list-tabs").next().prop("id")&&$("#pageFilter").detach().insertAfter(".list-cont")}function c(){o(),$(".fcoll-cont").removeAttr("style"),$(".list-page .trklist").length>0&&arrangeTrackList(".list-page")}var d,h,p,u,f,g,m,v=!1;d=!1,h=!0,p=!1,-1!=location.pathname.indexOf("/dj-top-10s")&&(v=["label","r_date"]),$(".list-page a").click(function(){return TX.handleClick(this),!1}),$(".list-page .genre-id").length>0&&(p=$(".genre-id").data("gid")),location.href.indexOf("&gfd=0")>=0&&(h=!1),$("#listTabMenu a").length>0&&$("#listTabMenu a").click(function(){var t=$(this);setTimeout(function(){var e,a,i,r="";return e=TX.getEvalObjFromData(t),e&&""!=e.base?(/\/my-traxsource\//.test(e.base)||(r=m?"?cn=tracks":""),i=e.base+r,a=e.base.indexOf("/all")>=0,m&&!a&&p&&h&&(i+="&gf="+p),h||(i+="&gfd=0"),i+=TX.ippAppender(i),void TX.pushPath(i)):!1},500)}),u=TX.getEvalObjFromData("#pageFilter","condition"),f=u&&"tracks"==u.cn?"tipp":"ripp",m=u&&u.cn&&"tracks"==u.cn,$("#pageFilter .view-mode a").click(function(){if($(this).prop("id")==u.cn)return!1;var e,a;$("#pageFilter .fsect .active-f").length>0&&$("#pageFilter .fsect a").removeClass("active-f"),$(this).addClass("active-f"),e=TX.getCookie(TX.ippCookieTracks),a=TX.getCookie(TX.ippCookieTitles),"tracks"==$(this).prop("id")?(e&&$("#tipp"+e).addClass("active-f"),m=!0):"titles"==$(this).prop("id")&&(a&&$("#ripp"+a).addClass("active-f"),m=!1),t()}),$("#pageFilter .ipp a").click(function(){var e;e=$(this).parent().hasClass("ipp-track")?"tracks":"titles",TX.setCookie(e+"IPP",$(this).data("ipp"),1e3),$(".ipp a").removeClass("active-f"),$(this).addClass("active-f"),t()}),$("#pageFilter .preord-links a").click(function(){return $(this).attr("data-po")==u.showPOs?!1:($("#pageFilter .preord-links a").removeClass("active-f"),$(this).addClass("active-f"),void $.ajax({url:TX.handlerScript+"?act=setrc&var=po&value="+$("#pageFilter .preord-links .active-f").attr("data-po"),type:"GET",success:function(){t()}}))}),$("#pageFilter .rdate-filt a.filt-a").click(function(){$(".rdate-filt a.filt-a").not($(this)).removeClass("active-f"),$(this).toggleClass("active-f"),r(),"custom"!=$(this).prop("id")?t():($("#pRange").toggle(),$(".rdate-filt #custom").hasClass("active-f")?TX.savedDateRange&&($("#pStart").val(TX.savedDateRange[0]),$("#pEnd").val(TX.savedDateRange[1]),t()):($("#pStart, #pEnd").val(""),d&&t()))}),$("#pRange input").datepicker({yearRange:"1980:c",numberOfMonths:1,gotoCurrent:!0,maxDate:"+0",dateFormat:"yy-mm-dd",beforeShow:function(t){"pStart"==$(t).prop("id")?(endDate=$("#pRange #pEnd").datepicker("getDate"),endDate&&$(t).datepicker("option","maxDate",endDate)):(startDate=$("#pRange #pStart").datepicker("getDate"),startDate&&$(t).datepicker("option","minDate",startDate))},onClose:function(){if(d){if(d[0]==$("#pStart").val()&&d[1]==$("#pEnd").val())return!1;l()}else $("#pStart").val().length>0&&$("#pEnd").val().length>0&&l()}}),$(".fcoll .fhdr").click(function(){TX.viewID>=4||(TX.viewID<2?($(".fcoll-cont",$(this).parent()).center(),$(".fcoll-cont",$(this).parent()).css("top","0px")):$(".fcoll-cont",$(this).parent()).removeAttr("style"),$(".fcoll-cont",$(this).parent()).slideToggle(200,"easeOutCubic"))}),$(".fcoll-cont .com-close").click(function(){TX.viewID>=4||$(this).parent().slideToggle(200,"easeOutCubic")}),$("#pageFilter .genre-filt a.filt-a").click(function(){$(this).hasClass("genre-clr")?(n(),p&&(h=!1)):(m&&$(this).data("gid")==p&&(h=!$(this).hasClass("active-f")),$(this).toggleClass("active-f")),r(),t()}),$("#pageFilter .reset-filt").click(function(){n(),s(),t()}),a(),mainPlaylist.enablePlayAll(".list-page"),enablePager(),enableShares(),$(".list-page .list-grid").length>0&&enableTitleGridItems(".list-page"),$(".list-page .trklist .trk-row").length>0&&enableTrackList($(".list-page")),$(".list-page .trklist .com-buy").length>0&&$(".list-page .trklist .com-buy").click(function(){var t=TX.getEvalObjFromData($(this),"cart");add2cart(t,$(this))}),$(".list-page .trklist .sort a").click(function(){v&&-1!==$.inArray($(this).attr("data-sort"),v)||(u||(u={}),u.ob&&u.ob==$(this).data("sort")&&u.so&&u.so.length>0?u.so="desc"==u.so?"asc":"desc":u.so="",u.ob=$(this).data("sort"),t())}),$("#sortSelect").change(function(){u||(u={});var e=$(this).val().split(" ");"def"==e[0]?(u.ob="",u.so=""):(u.ob=e[0],u.so=e[1]),t()}),g=parseInt($("#pageFilter .ipp .active-f").data("ipp")),g&&g>10&&$(".list-pager.top .pager").length>0&&$(".list-pager.top").show(),enableArtLabSubHandler(),$(".empty-msg").length>0&&$(".list-hdr .btns").hide(),$(document).on("viewChange",function(){c()}),enablePageStarters(),c()}function enableCartCommons(){function t(){$(".cart-dd-list").clone().appendTo(".cart-select-drop"),$(".cart-select-drop .cart-lnk-cell.def").remove(),$(".cart-select-drop a").click(function(){return TX.handleClick(this),!1});var t,e=$(".cart-select").position();$(".cart-select-drop").width();t=e.left-$(".cart-select-drop").width()+$(".cart-select").width(),0>t&&(t=0),$(".cart-select-drop").css("left",t).show()}function e(){$(".cart-select-drop").empty().hide()}$(".cart-cont a").click(function(){return TX.handleClick(this),!1}),TX.isMobile?$(".cart-select").click(function(){$(".cart-select-drop").is(":visible")?e():t()}):$(".cart-select").mouseenter(function(){$(".cart-select-drop").is(":visible")||t()}),$(".cart-name-cont").mouseleave(function(){e()}),setTimeout(function(){"function"==typeof zE&&zE(function(){zE.setHelpCenterSuggestions({labels:["carts","cart-checkout"]}),zE.show()})},1e3)}function enablePageCart(){function t(){p={method:null,targetId:0,bitrate:!1,all:!1,selArr:[]}}function e(){if(0!=$(".cart-list").length){var t;h&&($(".cart-list .trklist #s_"+h.ob).addClass("sort"),$(".cart-list .trklist #s_"+h.ob).addClass(h.so)),t=""==h.ob?"def":h.ob+" "+h.so,$("#sortSelect").length>0&&$("#sortSelect").val(t),$("#sortSelectTtl").length>0&&$("#sortSelectTtl").val(t)}}function a(){$("#selAllItems").prop("checked",!1),$("#selAllTag").html("Select All")}function i(){$("#selAllItems").prop("checked",!0),$("#selAllTag").html("Select None")}function r(){return 0==$(".mscb:checked").length?(TX.showMessage("You must first select at least one item.",{title:"No check-boxes selected."}),!1):!0}function n(e){t(),$(".mscb:checked").each(function(){e&&$(".prc.upgrade",$(this).parent().parent()).length>0?$(this).prop("checked",!1):p.selArr.push({type:$(this).hasClass("trk")?"track":"title",id:$(this).data("item_id")})}),p.all=0==$(".mscb:not(:checked)").length}function s(t){var e=TX.getCart(t);$("#cartTotal").html(e.total)}function l(){var t,e=p.selArr.length,a=[],i=[],r=0;if(0!=e){if(p.all)i=a="";else{for(;e--;)"track"==p.selArr[r].type?i.push(p.selArr[r].id):a.push(p.selArr[r].id),r++;i=i.length>0?"&track_ids="+i.join(","):"",a=a.length>0?"&title_ids="+a.join(","):""}t="cart_id="+$("#cartID").val(),"sc_move"==p.method&&(t+="&target_id="+p.targetId),"set_bitrate"==p.method&&(t+="&bitrate="+p.bitrate),t+=a+i,TX.getJson(TX.cartScript+"?act="+p.method,function(t){if(0!=t.error){var a,i;return a=TX.getCart(p.targetId),"object"!=typeof a&&(i="We're sorry, that cart does not exist."),i=t.message.replace("[%DEST_CART_NAME%]",a.name),void TX.showMessage(i,{title:"Oops"})}var r=!1,n=0;if(e=p.selArr.length,1==e&&(r=p.selArr[0].id.toString()),"set_bitrate"==p.method)1==e&&p.selArr[0].hasOwnProperty("price")?"track"==p.selArr[0].type?$(".prc #prcCont","#cartTrackList .trk-row[data-trid="+p.selArr[0].id+"]").html(p.selArr[0].price):$(".prc #prcCont","#cartTitleList .trk-row[data-tid="+p.selArr[0].id+"]").html(p.selArr[0].price):(TX.refreshPage(),getPlaylistCartStatuses()),t.hasOwnProperty("carts")&&updateGlobalCarts(t.carts.data,t.carts.html),s($("#cartID").val());else{for(1==e?t.hasOwnProperty("cpd")&&updatePlaylistCartStats(t.cpd):getPlaylistCartStatuses(),t.hasOwnProperty("carts")&&updateGlobalCarts(t.carts.data,t.carts.html),s($("#cartID").val()),n=0;e--;)"track"==p.selArr[n].type?$("#cartTrackList .trk-row[data-trid="+p.selArr[n].id+"]").remove():$("#cartTitleList .trk-row[data-tid="+p.selArr[n].id+"]").remove(),n++;setTimeout(function(){0==$("#cartTrackList .trk-row:not(.hdr)").length&&$("#cartTrackList").remove(),0==$("#cartTitleList .trk-row:not(.hdr)").length&&$("#cartTitleList").remove(),0==$("#cartTrackList .trk-row:not(.hdr)").length&&0==$("#cartTitleList .trk-row:not(.hdr)").length&&TX.refreshPage()},100)}},"POST",t)}}function o(){"2"!=$("#cartID").val()&&$(".cart-cont .r-date > .pre-ord-txt").length>0?$("#preOrdWarningBlock").show():$("#preOrdWarningBlock").hide()}function c(){TX.viewID<=2?0==$(".trk-row:not(.hdr) .artit-cont > .trk-cell").first().length&&$(" .trklist .trk-row:not(.hdr)").each(function(){$(".title, .artists",this).detach().appendTo($(".artit-cont",this)),$(".btncell > a, .btncell > select",this).detach().appendTo($(".menu-fly",this))}):$(".trk-row:not(.hdr) .artit-cont > .trk-cell").first().length>0&&$(".trklist .trk-row:not(.hdr)").each(function(){$(".title, .artists",this).detach().insertAfter($(".artit-cont",this)),$(".menu-fly > a, .menu-fly > select",this).detach().appendTo($(".btncell",this))})}function d(){c()}var h,p;h=TX.getEvalObjFromData($("#cartCondition"),"condition"),enableCartCommons(),mainPlaylist.enablePlayAll(".cart-cont"),$(".cart-cont .sel-all, #selAllItems").click(function(t){t.stopPropagation(),"1"==$("#selAllState").val()?(a(),$("#selAllState").val("0"),$(".mscb").prop("checked",!1)):(i(),$("#selAllState").val("1"),$(".mscb").prop("checked",!0))}),$(".mscb").click(function(){$(".mscb:not(:checked)").length>0?(a(),$("#selAllState").val("0")):(i(),$("#selAllState").val("1"))}),$(".format-change").click(function(){r()&&(n(1==$(this).data("bitrate")),p.method="set_bitrate",p.bitrate=$(this).data("bitrate"),l())}),$(".cart-track .btncell select").change(function(){var e,a;e=$("option:selected",this).data("price"),a=$("option:selected",this).val(),t(),p={method:"set_bitrate",bitrate:a,all:!1,selArr:[{type:"track",id:$(this).parent().parent().data("trid"),price:e}]},l()}),$(".cart-title .btncell select").change(function(){var e,a;e=$("option:selected",this).data("price"),a=$("option:selected",this).val(),t(),p={method:"set_bitrate",bitrate:a,all:!1,selArr:[{type:"title",id:$(this).parent().parent().data("tid"),price:e}]},l()}),$(".cart-move").click(function(){var e,a,i=this;showCartAlt(this,!1,!1,function(r){t(),$(i).hasClass("rel")?(e="title",a=$(i).parent().parent().data("tid")):(e="track",a=$(i).parent().parent().data("trid")),p={method:"sc_move",targetId:r,all:!1,selArr:[{type:e,id:a}]},hideCartAlt(),l()},!1,[$("#cartID").val()])}),$(".cmove-to").click(function(){r()&&showCartAlt(this,!1,!0,function(t){n(),p.method="sc_move",p.targetId=t,hideCartAlt(),l()},"Move items to:",[$("#cartID").val()])}),$(".cart-cont .com-remove").click(function(){t();var e,a;$(this).hasClass("rel")?(e="title",a=$(this).parent().parent().data("tid")):(e="track",a=$(this).parent().parent().data("trid")),p={method:"sc_del",all:!1,selArr:[{type:e,id:a}]},l()}),"2"==$("#cartID").val()&&$(".cart-list .com-remove").hide(),$(".cart-cont .rem-selected").click(function(){if(r()){var t;n(),p.method="sc_del",t="2"==$("#cartID").val()?"PERMANENTLY delete these items?<br>(This cannot be undone!)":"Remove the selected items from this cart to your Trash?",TX.showMessage(t,{title:"Remove Selected Items",askConfirm:!0,showAsError:"2"==$("#cartID").val(),yesCallback:function(){l()}})}}),$(".cart-track .trklist .trk-row").length>0&&enableTrackList($(".cart-track"),"trid"),$(".cart-title .trklist .trk-row").length>0&&(enableTrackList($(".cart-title"),"tid"),$(".cart-title .i-info").click(function(){showTitlePopup(this)})),$(".cart-cont .prc.pre-purch").attr("title","NOTE: You already purchased this item."),$(".cart-cont .prc.upgrade").attr("title","Upgrade"),$(".cart-list .trk-cell.sort a").click(function(){var t;t=h&&h.ob==$(this).data("sort")?"desc"==h.so?"asc":"desc":"asc",TX.pushPath("/cart/"+$("#cartID").val()+"?ob="+$(this).data("sort")+"&so="+t)}),$("#sortSelect, #sortSelectTtl").change(function(){var t,e,a;a=h&&h.cn?h.cn:"tracks";var i=$(this).val().split(" ");"def"==i[0]?(e="",t=""):(e=i[0],t=i[1]),TX.pushPath("/cart/"+$("#cartID").val()+"?ob="+e+"&so="+t)}),"2"==$("#cartID").val()&&$(".cart-cont .sum-tbl").hide(),$(document).on("viewChange",function(){d()}),enablePageStarters(),e(),o(),d()}function enablePageCheckout(){function t(){return document.CCForm.amount.value<1?(TX.showMessage("We're sorry, the minimum transaction amount allowed by credit card processing is $1.00",{title:"Oops"}),!1):""==document.CCForm.cc.value||document.CCForm.cc.value.length<document.CCForm.minCC.value?(document.CCForm.cc.focus(),TX.showMessage("Please enter valid credit card number.",{title:"Oops"}),!1):isNaN(document.CCForm.cc.value)&&0==/^X{9,12}\d{4}$/i.test(document.CCForm.cc.value)?(document.CCForm.cc.focus(),TX.showMessage("Credit card number must contain only digits.",{title:"Oops"}),!1):""==document.CCForm.mm.value?(TX.showMessage("Please select an expiration month.",{title:"Oops"}),document.CCForm.mm.focus(),!1):""==document.CCForm.yy.value?(TX.showMessage("Please select an expiration year.",{title:"Oops"}),document.CCForm.yy.focus(),!1):""!=document.CCForm.cvv.value&&document.CCForm.cvv.value.length<document.CCForm.minCVV.value?(TX.showMessage("Please enter valid Security Code.",{title:"Oops"}),document.CCForm.cvv.focus(),!1):""!=document.CCForm.cvv.value&&isNaN(document.CCForm.cvv.value)?(TX.showMessage("Security Code must contain only digits.",{title:"Oops"}),document.CCForm.cvv.focus(),!1):""==document.CCForm.cvv.value?(TX.showMessage("Please enter a Security Code.",{title:"Oops"}),document.CCForm.cvv.focus(),!1):!0}function e(){$.ajax({url:TX.paypalScript+"?act=sec",type:"GET",success:function(t){var e,a,i;return $(t).find("code").length>0?(a=$(t).find("code").text(),i=$(t).find("message").text(),TX.showMessage(i,{title:"Error "+a,showAsError:!0}),!1):(e=$(t).find("data").text(),void(location.href=e))}})}if(!($("#successMark").length>0)){var a=!1;0==$("#cartID").val().length&&($(".cart-name-hdr").hide(),a=!0),parseFloat($("#hidDiscount").val())>0&&($(".tot-cont .row-disc").show(),$(".tot-cont .row-tot").show()),parseFloat($("#hidCredit").val())>0&&($(".tot-cont .row-cred").show(),$(".tot-cont .row-tot").show(),$("#remBalAndCancelCont").show()),!a&&parseFloat($("#hidBalance").val())>0&&$("#applyBalBtn").show(),0==parseFloat($("#hidGrand").val())&&($(".co-sect.compl-co").show(),$(".co-sect.pmeth").hide()),$("#codeSubmit").click(function(){var t;0!=$("#codeID").val().length&&(TX.showMask(),showLoader(),t=$("#CodeCheckoutForm").serialize(),t+="&cart_id="+$("#cartID").val(),$.ajax({url:TX.callScript+"/checkout",type:"POST",data:t,success:function(t){var e=parseInt($(t).find("code").text()||0),a=$(t).find("message").text()||!1;0!=e?(hideLoader(),$("#codeID").val(""),a?TX.showMessage(a,{title:"Code not redeemed",showAsError:!0}):TX.hideMask()):$(t).find("data").length>0&&setTimeout(function(){$("#bodyBay").empty().html($(t).find("data").text()),hideLoader(),TX.hideMask(),$("#successMark").length>0&&getAndUpdateGlobalCarts()},1e3)}}))}),$(".pmeth .com-btn").click(function(){$(".gfc-buy-link").hide()});var i=0;$("#keep_cc").switchButton({show_labels:!1,clear:!1,width:40,height:20,button_width:20}),$(".pm-cc").click(function(){$(this).hasClass("pm-cc")&&$("#cc_block").fadeIn(200)}),$("#keep_cc").prop("checked")&&$("#cNum").val().length>0&&($("#keepCcCb").hide(),$("#forgetCC").show()),$("#forgetCC").click(function(){TX.showMessage("Permanently remove this saved card number?",{title:"Are you sure?",askConfirm:!0,yesCallback:function(){$.ajax({url:TX.handlerScript+"?act=setrc&var=keep_cc&value=0",type:"GET",success:function(){TX.refreshPage()}})}})});var r=!1;$("#cNum").val().length>0&&$("#cNum").keyup(function(){!r&&$("#keep_cc").prop("checked")&&$("#cNum").val()!=$("#cNum").prop("defaultValue")&&($("#keep_cc").switchButton({checked:!1}),$("#forgetCC").hide(),$("#keepCcCb").show(),r=!0)}),$("#ccSubmit").click(function(){var e;if(!$("#ccSubmit").hasClass("disabled")){if(i>15)return void TX.showMessage("If you are having trouble with your checkout, please contact support@traxsource.com.<br><br>You may also re-login and try again.",{title:"Having Trouble?"});if($("#ccSubmit").addClass("disabled"),showLoader(),!t())return $("#ccSubmit").removeClass("disabled"),void hideLoader();i++,e=$("#CCForm").serialize(),$.ajax({url:TX.callScript+"/ccproc",type:"POST",data:e,success:function(t){$(t).find("code").length>0?(TX.showMessage($(t).find("message").text(),{title:"A Card error occured",showAsError:!0}),$("#ccSubmit").removeClass("disabled"),hideLoader()):$(t).find("data").length>0&&($("#coData").empty().html($(t).find("data").text()),getAndUpdateGlobalCarts())}}),hideLoader()}}),$(".sec-code .i-info").click(function(){var t='<div style="width: 155px; margin: 0 auto"><img src="/img/cvvs.png" width="153" height="205" alt="Security Codes"></div>';TX.showMessage(t,{title:"Security Code Location"})}),$("#ppfCall1").click(function(){showLoader(),$(this).hasClass("pm-pp")&&($(".pm-cc, .pm-ab").css("visibility","hidden"),$("#cc_block").is(":visible")?$("#cc_block").fadeOut(200,function(){$("#pp_block").fadeIn(200,function(){e()})}):$("#pp_block").fadeIn(200,function(){e()}))}),$("#applyBalBtn").click(function(){var t;showLoader(),t="credit=1",$.ajax({url:TX.callScript+"/checkout",type:"POST",data:t,success:function(t){hideLoader(),$(t).find("code").length>0?TX.showMessage($(t).find("message").text(),{title:"A Code error occured",showAsError:!0}):$(t).find("data").length>0&&$("#bodyBay").empty().html($(t).find("data").text())}})}),$("#complChkoutBtn").click(function(){if(!$(this).hasClass("disabled")){$(this).addClass("disabled");var t="cart_id="+$("#cartID").val()+"&complete=1&rpc=1";$.ajax({url:TX.callScript+"/checkout",type:"POST",data:t,success:function(t){$(t).find("code").length>0?(TX.showMessage($(t).find("message").text(),{title:"An error occured",showAsError:!0}),$("#complChkoutBtn").removeClass("disabled"),hideLoader()):$(t).find("data").length>0&&($("#bodyBay").empty().html($(t).find("data").text()),$("#successMark").length>0&&getAndUpdateGlobalCarts())}})}}),$("#transCancelLnk").click(function(){TX.showMessage("Cancel this transaction?",{askConfirm:!0,yesCallback:function(){var t;t="cancel=1",showLoader(),$.ajax({url:TX.callScript+"/checkout",type:"POST",data:t,success:function(t){hideLoader(),$(t).find("code").length>0?TX.showMessage($(t).find("message").text(),{title:"An error occured",showAsError:!0}):TX.pushPath("/cart/"+$("#cartID").val()+"/")}})}})}),setTimeout(function(){"function"==typeof zE&&zE(function(){zE.setHelpCenterSuggestions({search:"checkout payment gift"}),zE.show()})},2e3)}}function enablePageMTS(){function t(){function t(t){var e,a=$.trim($(".mts-filt-inp").val()),i=location.pathname;t&&0==a.length&&!$(".mts-filt .reset-filt").is(":visible")||(e=i+"?term="+encodeURIComponent(a),!t&&$(".only-new").hasClass("checked")&&(e+="&onlynew=1"),TX.rpcGet2Body(TX.callScript,e,"#bodyBay",function(){$(".mts-filt-inp").val(a),$(".mts-filt-inp").focus(),$(".mts-filt-inp").val().length>0&&$(".mts-filt .reset-filt").show()}))}0==$(".mts-filt-inp").val().length&&$(".mts-filt .reset-filt").hide(),$(".mts-filt-inp").keydown(function(){clearTimeout(TX.stateHolders.mtsFiltCall),TX.stateHolders.mtsFiltCall=setTimeout(function(){$(this).blur(),t(!0)},1e3)}),$(".mts-filt .reset-filt").click(function(){var t=location.pathname,e="";e=$(".only-new").hasClass("checked")?t+"?onlynew=1":t,TX.rpcGet2Body(TX.callScript,e)}),$(".only-new").click(function(){$(this).hasClass("checked")?$(this).removeClass("checked"):$(this).addClass("checked"),t(!1)})}function e(){mainPlaylist.enablePlayAll($(".mts-page")),$(".play-count.sm .ind-play-cnt:empty").each(function(){$(this).parent().hide()}),$(".com-follow.unfollow").click(function(){var t,e,a;showLoader(),$(this).hasClass("label")?(t=$(this).parent().data("lid"),e="?act=no_follow&label_id=",a=1):$(this).hasClass("artist")&&(t=$(this).parent().data("aid"),e="?act=no_follow&artist_id=",a=1),$.ajax({url:TX.handlerScript+e+t,type:"GET",success:function(t){var e;return hideLoader(),e=parseInt($(t).find("code").text()),isNaN(e)?!1:void(e==a&&TX.handleURL(location.pathname+location.search))}})}),setTimeout(function(){"function"==typeof zE&&zE(function(){zE.setHelpCenterSuggestions({labels:["artist-label-follow"]}),zE.show()})},2e3)}function a(){function t(t){showLoader(),$.ajax({url:TX.handlerScript+"?act=utl_remove&utl_id="+t,type:"GET",success:function(t){var e;return hideLoader(),e=parseInt($(t).find("code").text()),isNaN(e)?!1:void(0==e&&TX.handleURL(location.pathname))}})}function e(){var t;a&&$(".mts-list .h-cell #s_"+a.ob).addClass("sort").addClass(a.so),t=""==a.ob?"def":a.ob+" "+a.so,$("#sortSelect").val(t)}$(".mts-list .utl-edit").click(function(){var t=$(this).parent().parent().data("utlid");TX.stateHolders.userChartLastLocation=location.pathname+location.search,TX.rpcGet2Body(TX.handlerScript,"?act=utl&view=form&utl_id="+t)}),$(".mts-list .com-remove").click(function(){var e=$(this).parent().parent().data("utlid");TX.showMessage('Are you sure you want to remove this chart?<br /><span style="color: #c33">Warning: If you shared it anywhere, the link will be broken.</span>',{askConfirm:!0,yesCallback:function(){t(e)},title:"Removing a chart"})}),$(".cl-row .fly-btn").click(function(){$(".menu-fly",$(this).parent()).is(":visible")?($(".menu-fly",$(this).parent()).hide(),$(this).removeClass("flip")):($(".com-list .menu-fly").removeAttr("style"),$(".menu-fly",$(this).parent()).show(),$(this).addClass("flip"))}),$(".cl-row").mouseleave(function(){$(".menu-fly",this).removeAttr("style"),$(".fly-btn",this).removeClass("flip")}),$(".menu-fly > a, .btncell > a").click(function(){$(this).parent(".menu-fly").removeAttr("style")}),$(".cl-row .fly-btn").mousedown(function(t){t.preventDefault()});var a=TX.getEvalObjFromData($("#mtsCondition"),"condition");$(".mts-list .cl-cell.sort a").click(function(){var t,e,i;e=a&&a.cn?a.cn:"title",t=a&&a.ob==$(this).data("sort")?"desc"==a.so?"asc":"desc":"asc",i="/my-traxsource/my-charts/"+e+"?ob="+$(this).data("sort")+"&so="+t,TX.rpcGet2Body(TX.callScript,i)}),$("#sortSelect").change(function(){var t,e,i,r;i=a&&a.cn?a.cn:"title";var n=$(this).val().split(" ");"def"==n[0]?(e="",t=""):(e=n[0],t=n[1]),r="/my-traxsource/my-charts/"+i+"?ob="+e+"&so="+t,TX.rpcGet2Body(TX.callScript,r)}),e(),setTimeout(function(){"function"==typeof zE&&zE(function(){zE.setHelpCenterSuggestions({
search:"user chart"}),zE.show()})},2e3)}function i(){function t(){var t,e;t=escape($("#messagePopup .mspu-input").val()),e="act=utl_create&title="+t,$.ajax({url:TX.handlerScript,type:"POST",data:e,success:function(t){var e,a;return e=parseInt($(t).find("code").text()),isNaN(e)?!1:(a=$(t).find("message").text(),0!=e&&a.length>0?($("#messagePopup .mspu-cont").html(a),$("#messagePopup").addClass("error"),!1):(TX.hideMessage(),void TX.pushPath(location.pathname)))}})}msg="<b>Please provide a title for your chart:</b><br><i>Note: A public URL will be generated from this title.</i><br />",TX.showMessage(msg,{title:"Creating a new chart:",yesCallback:t,inputMode:!0,inputMin:3})}function r(){$(".mts-list").length>0&&(TX.viewID<=1?0==$(".cl-row:not(.hdr) .menu-fly > .utl-edit").first().length&&$(" .cl-row:not(.hdr)").each(function(){$(".btncell > a",this).detach().appendTo($(".menu-fly",this))}):$(".cl-row:not(.hdr) .menu-fly > .utl-edit").first().length>0&&$(" .cl-row:not(.hdr)").each(function(){$(".menu-fly > a",this).detach().appendTo($(".btncell",this))}))}function n(){r()}$(".mts-page a").click(function(){return TX.handleClick(this),!1}),$("#mtsTabMenu a").length>0&&$("#mtsTabMenu a").click(function(){var t=$(this);setTimeout(function(){var e=TX.getEvalObjFromData(t);return e&&""!=e.base?void TX.pushPath(e.base):!1},100)}),$(".mts-grid").length>0&&e(),$(".mts-filt").length>0&&t(),$(".mts-list").length>0&&a(),$(".mts-page .add-new").length>0&&$(".mts-page .add-new").click(function(){i()}),enablePager(),$(document).on("viewChange",function(){n()}),enablePageStarters(),n()}function enablePageDownloadsPage(){function t(){showLoader(),$.ajax({url:TX.callScript+"/downloads?view=list&rpc=1",type:"GET",success:function(t){$(".dl-list-cont").empty().html($(t).find("data").text()),enableTrackList($(".dl-list-cont"),!1,!0),i(),enablePageStarters(),e(),hideLoader(),setTimeout(function(){"function"==typeof zE&&zE(function(){zE.setHelpCenterSuggestions({search:"download"}),zE.show()})},2e3)}})}function e(){var t,e,a,i,r,n,s=90;e='<a href="javascript:void(0)" class="dropbox-btn whole" title="Send this batch to my Dropbox" data-dbxb="%%%"><svg class="dropbox-svg"><use xlink:href="/img/vects.v2.svg#dropbox"></use></svg><svg class="dropbox-svg trans"><use xlink:href="/img/vects.v2.svg#refresh"></use></svg><svg class="dropbox-svg done"><use xlink:href="/img/vects.v2.svg#dbox-done"></use></svg><span class="dbox-tag">@@@</span></a>',$("div.dl-order").each(function(){if(t=$(".dropbox-btn.sm",this).length,i=1,a=Math.ceil(t/s),1==a)$(".dbox-cont",this).append(e.replace("@@@"," All").replace("%%%","0"));else for($('<div class="dl-order-hdr"></div>').insertAfter($(".dl-order-hdr.multi-warn",this)),$(".dbox-cont",this).detach().appendTo($(".dl-order-hdr:nth-child(3)",this)),$(".dl-order-hdr.multi-warn",this).html($(".dl-order-hdr.multi-warn",this).html().replace("@%@","<b>"+s+"</b>")),$(".dl-order-hdr.multi-warn",this).show(),n=1;a>=n;)r=i+s-1,r>t&&(r=t),$(".dbox-cont",this).append(e.replace("@@@"," "+i+" - "+r).replace("%%%",n++)),i+=s}),renderDboxStatuses(),$(".dropbox-btn.whole").click(function(){if(!$(this).hasClass("started")&&!TX.stateHolders.dropBoxBtnLock){var t,e,a,i,r,n,l;t=$(this).parent().parent().parent().prop("id"),t.length<3||(e=$("#"+t),i=$(this).data("dbxb"),showLoader(),$(".dropbox-btn.whole").addClass("locked"),TX.stateHolders.dropBoxBtnLock=!0,$(this).removeClass("completed locked").addClass("started"),a=new dropBoxTransfer,a.files=[],a.traxTransId=t,a.traxBtnIndex=i,a.traxMultiBatch=$(".dropbox-btn.whole",e).length>1,"object"!=typeof TX.dropBoxOrders[t]&&(TX.dropBoxOrders[t]={}),TX.dropBoxOrders[t][i]="started",0==i?n=$(".dropbox-btn.sm",e):(r=$(".dropbox-btn.sm",e).length,l=(i-1)*s+s,l>r&&(l=r),n=$(".dropbox-btn.sm",e).slice((i-1)*s,l)),n.each(function(){a.files.push(TX.getEvalObj($(this).data("dbox")))}),a.files.length?Dropbox.save(a):(console.log("No Files"),setTimeout(function(){TX.stateHolders.dropBoxBtnLock=!1,$(".dropbox-btn.whole").removeClass("locked"),delete TX.dropBoxOrders[t][i],renderDboxStatuses()},1e3)),hideLoader())}})}function a(){TX.viewID<=2?(0==$(".trk-row .artit-cont > .trk-cell").first().length&&$(" .trklist .trk-row").each(function(){$(".title, .artists",this).detach().appendTo($(".artit-cont",this))}),TX.isMobile||$(".dlm-cont").hide()):($(".trk-row .artit-cont > .trk-cell").first().length>0&&$(".trklist .trk-row:not(.hdr)").each(function(){$(".title, .artists",this).detach().insertAfter($(".artit-cont",this))}),TX.isMobile||$(".dlm-cont").show())}function i(){a()}t(),setTimeout("get_wav_gen_stat()",2e3),TX.isMobile&&$(".dlm-cont").hide(),$(document).on("viewChange",function(){i()})}function enablePagePurchHistory(){function t(){TX.viewID<=2?0==$(".cl-row:not(.hdr) .trans > .pdate").first().length&&$(" .cl-row:not(.hdr)").each(function(){$(".pdate",this).detach().appendTo($(".trans",this)),$(".btncell > a",this).detach().appendTo($(".menu-fly",this))}):$(".cl-row:not(.hdr) .trans > .pdate").first().length>0&&$(" .cl-row:not(.hdr)").each(function(){$(".pdate",this).detach().insertAfter($(".trans",this)),$(".menu-fly > a",this).detach().appendTo($(".btncell",this))})}function e(){t()}$(".purch-hist-page a").click(function(){return TX.handleClick(this),!1}),$(".cl-row .fly-btn").click(function(){$(".menu-fly",$(this).parent()).is(":visible")?($(".menu-fly",$(this).parent()).hide(),$(this).removeClass("flip")):($(".com-list .menu-fly").removeAttr("style"),$(".menu-fly",$(this).parent()).show(),$(this).addClass("flip"))}),$(".cl-row").mouseleave(function(){$(".menu-fly",this).removeAttr("style"),$(".fly-btn",this).removeClass("flip")}),$(".menu-fly > a, .btncell > a").click(function(){$(this).parent(".menu-fly").removeAttr("style")}),$(".cl-row .fly-btn").mousedown(function(t){t.preventDefault()}),enablePager(),$(".ph-receipt, .ph-email").click(function(){var t,e,a=!1;return $(this).hasClass("ph-email")&&(a=!0),(e=this.parentNode.parentNode.getAttribute("data-tranid"))?(t="act=purchases&trans_id="+e,"1"==$(this).parent().parent().data("gfc")&&(t+="&gfc=1"),void(a?(t+="&media=email",$.ajax({url:TX.handlerScript,type:"GET",data:t,success:function(t){$(t).find("message").text().length>0&&TX.showMessage($(t).find("message").text(),{title:"Purchase History"})}})):window.open(TX.handlerScript+"?"+t,"temp"))):!1}),$(document).on("viewChange",function(){e()}),enablePageStarters(),e()}function enablePagePurchHistoryOrder(){function t(){arrangeTrackList("#purchaseOrderPage")}$(".purch-ord-page a:not(.unpub)").click(function(){return TX.handleClick(this),!1}),$("a.unpub").click(function(t){return t.preventDefault(),TX.showMessage("This item is no longer available.",{title:"We're sorry"}),!1}),$(document).on("viewChange",function(){t()}),enablePageStarters(),t()}function enablePageSearchResults(){function t(){arrangeTrackList("#searchResCont")}TX.suggXHR=!1,$(".search-res-cont a").click(function(){return TX.handleClick(this),!1}),$(".trklist").length>0&&enableTrackList($("#searchResCont")),mainPlaylist.enablePlayAll(".search-res"),$(".artist-grid").length>0&&enableTitleGridItems(".artist-grid"),$(".release-grid").length>0&&enableTitleGridItems(".release-grid"),$(".label-grid").length>0&&enableTitleGridItems(".label-grid"),$(".pager").length>0&&enablePager(),$("#searchTabMenu a").length>0&&$("#searchTabMenu a").click(function(){var t=$(this);setTimeout(function(){var e=TX.getEvalObjFromData(t);return e&&""!=e.base?void TX.pushPath(e.base):!1},100)}),$(document).on("viewChange",function(){t()}),enablePageStarters(),t()}function enablePageTitlePage(){function t(){hideFullImage(),arrangeTrackList("#ttlPageCont"),arrangeTitleGrids()}$("#ttlPageCont a").click(function(){return TX.handleClick(this),!1}),$(".btns .com-buy").click(function(){var t=TX.getEvalObjFromData($(this),"cart");add2cart(t,$(this))}),$(".btns .cart-alt").click(function(){showCartAlt(this)}),enableTrackList($("#trkListCont")),mainPlaylist.enablePlayAll("#ttlPageCont"),enableTitleGridItems(".similar-grid"),enableTitleGridItems(".more-from-cont"),enableShares(),enableExpandableCont("#ttlPageCont",100),$("#ttlPageCont .t-image").click(function(){1!=TX.viewID&&imageToFull("#ttlPageCont .t-image")}),$(".similar-list .grid-page").length>0&&$(".similar-grid .grid-cont").cycle({timeout:0,pauseOnPagerHover:!0,slides:"> .grid-page",pager:".similar-grid .cycle-pager",pagerTemplate:"<div></div>",next:".similar-grid .pager-LR.next",prev:".similar-grid .pager-LR.prev",log:!1}),$(".more-from-cont .grid-page").length>0&&$(".more-from-list").each(function(){$(".com-grid",this).length>0&&$(".grid-cont",this).cycle({speed:300,timeout:0,slides:"> .grid-page",pager:".more-from-list .cycle-pager",pagerTemplate:"<div></div>",next:".more-from-grid .pager-LR.next",prev:".more-from-grid .pager-LR.prev",log:!1})}),0==$(".more-from-cont .more-from-grid").length&&$(".more-from-cont").hide(),$(".more-from-cont .more-from-grid").each(function(){$(".grid-page",this).length<2&&$(".grid-footer",this).hide()}),$(document).on("viewChange",function(){t()}),enablePageStarters(),t(),$(".trklist").removeClass("init-invis")}function enablePageTopListPage(){function t(){arrangeTrackList("#topListCont")}$(".top-page a").click(function(){return TX.handleClick(this),!1}),mainPlaylist.enablePlayAll(".top-page"),/(\/singles|albums)/.test(location.pathname)&&$(".share.embed").hide(),enableShares(),$("#listTabMenu a").length>0&&$("#listTabMenu a").click(function(){var t=$(this);setTimeout(function(){var e,a;return e=TX.getEvalObjFromData(t),e&&""!=e.base?(a=e.base,a+=TX.ippAppender(a),void TX.pushPath(a)):!1},500)}),$(".top-page .trk-row").length>0&&enableTrackList($(".top-page"),$("#topIdType").val()),enableArtLabSubHandler(),$(document).on("viewChange",function(){t()}),enablePageStarters(),t()}function enablePageTrackPage(){function t(){TX.viewID<=3?2==TX.viewID?"tr-image"!=$(".trkp-hdr .tr-info").next().attr("class")&&$(".trkp-hdr .tr-image").detach().insertBefore(".trkp-hdr .tr-details"):"tr-image"!=$("#trpCanvCont").prev().attr("class")&&$(".trkp-hdr .tr-image").detach().insertBefore("#trpCanvCont"):"tr-image"!=$(".trkp-hdr > div:first-child").attr("class")&&$(".trkp-hdr .tr-image").detach().insertBefore(".trkp-hdr .tr-info"),TX.viewID<=2?"rt-cont"!=$(".trkp-low-cont > div:first-child").attr("class")&&$(".trkp-low-cont .lt-cont").detach().insertAfter(".trkp-low-cont .rt-cont"):"rt-cont"==$(".trkp-low-cont > div:first-child").attr("class")&&$(".trkp-low-cont .lt-cont").detach().insertBefore(".trkp-low-cont .rt-cont")}function e(){t()}$(".track-page a").click(function(){return TX.handleClick(this),!1}),$(".tr-info .com-buy").click(function(){var t=TX.getEvalObjFromData($(this),"cart");add2cart(t,$(this))}),$(".tr-info .cart-alt").click(function(){showCartAlt(this)}),mainPlaylist.enablePlayButtons(".com-play","TP","track",!0),mainPlaylist.enablePlayButtons(".com-pl","TP","track",!1),$(".trkp-hdr .i-info").click(function(){showTitlePopup($(this))}),$(".track-page .com-follow").click(function(){followEntity($(this))}),enableShares(),$(".trkp-low-cont .dj-chart-appearances").length>0&&enableTitleGridItems(".trkp-low-cont .dj-chart-appearances");var a,i;$("#wfData").val().length>50&&(i=TX.getEvalObj($("#wfData").val()),i.length>50?(a=new Waveform("trpCanvCont"),a.drawProgress=!1,a.resizeTimeoutWait=300,a.waveformDataSet=i,$("#prvStart").val().length>0&&$("#prvLength").val().length>1&&$("#trkLength").val().length>2&&(a.drawHighlight=!0,a.highlightStart=parseInt($("#prvStart").val()),a.highlightDurSecs=parseInt($("#prvLength").val()),a.trackDurSecs=parseInt($("#trkLength").val())),a.directDraw()):$("#trpCanvCont").hide()),$(document).on("viewChange",function(){e()}),enablePageStarters(),e()}function enablePageUpgradesPage(){function t(){var t,e,a;a=[],i&&i.ob&&i.ob.length>0&&a.push("ob="+i.ob),i&&i.so&&i.so.length>0&&a.push("so="+i.so),t=location.hash.length>1?location.hash.replace("#",""):location.pathname,re=/\?(.*)/,urlArr=t.split(re),urlArr[0]&&(t=urlArr[0]),a.length>0&&(a.length>1?ahash=a.join("&"):ahash=a[0],e=t+"?"+ahash,TX.pushPath(e))}function e(){TX.viewID<=2?0==$(".trk-row:not(.hdr) .artit-cont > .trk-cell").first().length&&$(" .trklist .trk-row:not(.hdr)").each(function(){$(".title, .artists",this).detach().appendTo($(".artit-cont",this)),$(".btncell > a",this).detach().appendTo($(".menu-fly",this))}):$(".trk-row:not(.hdr) .artit-cont > .trk-cell").first().length>0&&$(".trklist .trk-row:not(.hdr)").each(function(){$(".title, .artists",this).detach().insertAfter($(".artit-cont",this)),$(".menu-fly > a",this).detach().appendTo($(".btncell",this))}),1==TX.viewID?0==$(".trk-row:not(.hdr) .menu-fly .ulink").first().length&&$(" .trklist .trk-row:not(.hdr)").each(function(){$(".ulink",this).detach().appendTo($(".menu-fly",this))}):$(".trk-row:not(.hdr) .menu-fly .ulink").first().length>0&&$(" .trklist .trk-row:not(.hdr)").each(function(){$(".ulink",this).detach().appendTo($(".prc",this))})}function a(){e()}var i;$(".upgrade-page a").click(function(){return TX.handleClick(this),!1}),i=TX.getEvalObjFromData(".upgrade-page","condition"),i.ob&&i.ob.length>0&&($(".trklist .sort a").removeClass(),$(".trklist .sort a#s_"+i.ob).length>0&&(so=i.so.length>0?" "+i.so:"",$(".trklist .sort a#s_"+i.ob).addClass("sort"+so))),mainPlaylist.enablePlayAll(".upgrade-page"),enablePager(),$(".upgrade-page .trklist .trk-row").length>0&&enableTrackList($(".upgrade-page")),$(".upgrade-page .trklist .sort a").click(function(){i||(i={}),i.ob&&i.ob==$(this).data("sort")&&i.so&&i.so.length>0?i.so="desc"==i.so?"asc":"desc":i.so="",i.ob=$(this).data("sort"),t()}),$("#sortSelect").change(function(){i||(i={});var e=$(this).val().split(" ");"def"==e[0]?(i.ob="",i.so=""):(i.ob=e[0],i.so=e[1]),t()}),$(".trklist .free-upg").length>0&&$(".trklist .free-upg").click(function(){if($(this).hasClass("added"))return!1;var t,e,a,i=!1,r=!1;return $currBtn=$(this),(t=TX.getEvalObjFromData($currBtn,"upg"))?(t.hasOwnProperty("bundle_id")?(r=t.bundle_id,e="bundle_id="+r):t.hasOwnProperty("title_id")?(i=t.title_id,e="title_id="+i):e="track_id="+t.track_id,a="act=free_upgrade&"+e,void $.ajax({url:TX.handlerScript,type:"GET",data:a,success:function(t){if("1"==$(t).find("code").text())return TX.showMessage("An error has occured upgrading this track, if the problem persists please contact support@traxsource.com.",{title:"Sorry",showAsError:!0}),!1;var e,a;i||r?($(".free-upg").each(function(t,e){var a=TX.getEvalObjFromData($(e),"upg");(i&&a.title_id==i||r&&a.bundle_id==r)&&$(this).addClass("added")}),e='<span style="color: #5cf;">Since you purchased this whole release, an AIFF file download link has been generated in your <a href="/downloads">downloads list</a> for all tracks in this release.</span>'):($currBtn.addClass("added"),e='<span style="color: #5cf;">An AIFF file download link has been generated in your <a href="/downloads">downloads list</a> for your selected track(s).</span>'),TX.stateHolders.firstFreeUpgrade?(TX.showMessage("Clicking a free upgrade will simply generate a download link in your downloads list.<br><br>"+e,{title:"Free Upgrades"}),TX.stateHolders.firstFreeUpgrade=!1):TX.showBottomBar(e),a=$(".trklist .free-upg:not(.added)").length,0==a&&TX.pushPath(location.pathname+location.search)}})):!1}),$(document).on("viewChange",function(){a()}),$(".list-pager.top").show(),enablePageStarters(),a()}function enablePageUserSettings(){var t="/settings";$(".settings-page a").click(function(){return TX.handleClick(this),!1}),$(".subscr-item input[type=checkbox]").switchButton({show_labels:!1,clear:!1,width:40,height:20,button_width:20}),$(".radio-set.bitrate").radioSet({valueElement:"#bitrateInp",change:function(){mainPlaylist.playlist.length&&$("#qualWarnCont").fadeIn(400)}}),$("#bitrateInp").val($(".radio-switch.checked").data("radio")),$(".set-hdr").click(function(){if(!$(this).next(".set-inp").is(":visible")){$(".set-inp").slideUp(200).removeClass("flip"),$(".set-hdr").removeClass("flip"),$(this).next(".set-inp").slideDown(200),$(this).addClass("flip"),$(this).hasClass("audioformat")||$(".radio-set.bitrate").radioSet("reset");var e="/"+$(this).data("tab");window.history.replaceState({url:t+e,trax:!0},"",t+e)}});var e=location.pathname.replace(t,"").replace("/","");e.length>0?($("h2[data-tab="+e+"]").next(".set-inp").slideDown(200),$("h2[data-tab="+e+"]").addClass("flip")):($(".set-inp").first().slideDown(200),$(".set-hdr").first().addClass("flip")),$(".settings-page .submit-button").click(function(){var t="act=settings",e=this;if($(this).hasClass("submit-subscr"))$(".subscr-cb input[type=checkbox]").each(function(){$(this).prop("checked")&&(t+="&"+$(this).attr("name")+"=1")});else if($(this).hasClass("submit-audio"))t+="&bitrate="+$("#bitrateInp").val();else if($(this).hasClass("submit-redeem")){if(0==$("#code_id").val().length)return;t+="&code_id="+$("#code_id").val()}else $(this).hasClass("submit-partial-gfc")&&(t+="&code_id="+$(this).parent().parent().data("gfc"));$.ajax({url:TX.handlerScript,type:"POST",data:t,success:function(t){var a=parseInt($(t).find("code").text()||0),i=$(t).find("message").text()||!1,r=$(t).find("balance").text()||-1;0==a?($(e).hasClass("submit-audio")?(clearPlaylist(),getCurrBitrate()):$(e).hasClass("submit-redeem")?(-1!=r&&$("#sAccBal").html("$"+$.trim(r)),TX.blink("#sAccBal",!1,200,2),$("#code_id").val("")):$(e).hasClass("submit-partial-gfc")&&(-1!=r&&$("#sAccBal").html("$"+$.trim(r)),TX.blink("#sAccBal",!1,200,2),$(e).parent().parent().remove()),i&&TX.showBottomBar('<img src="/img/check_mark_green.png" style="width:30px; vertical-align: middle;"> &nbsp; '+i)):($(e).hasClass("submit-redeem")&&$("#code_id").val(""),i&&TX.showMessage(i,{title:"Code not redeemed",showAsError:!0}))}})}),$(".settings-page .submit-button").css("visibility","visible"),$(".set-cart-row .default-svg.default").parent().attr("title","default"),$(".set-cart-row .cart-lnk-cell.def").click(function(){if(!$(".default-svg",this).hasClass("default")&&!$(".default-svg",this).hasClass("trash")){var t=$(this).parent().prop("id").replace("sCart-","");processCart("default","",t)}}),$(".settings-page .new-cart-cont > a:first").click(function(){addOrEditCart()}),$(".set-cart-row .com-remove").click(function(){var t=$(this).parent().parent().prop("id").replace("sCart-",""),e=TX.getCart(t);TX.showMessage("Are you sure you want to remove the cart <b>&quot;"+e.name+"&quot;</b> and its contents?<br>(All items will be moved to your Trash)",{title:"Warning!",showAsError:!0,askConfirm:!0,yesCallback:function(){processCart("del","",t)}})}),$("#sCart-0 .com-remove, #sCart-1 .com-remove, #sCart-2 .com-remove").css("visibility","hidden"),$("#sCart-2").after($(".set-cart-hdr.cus")),$(".set-rename-cart").click(function(){var t=$(this).parent().parent().prop("id").replace("sCart-",""),e=TX.getCart(t);$(".mspu-input").val(e.name),addOrEditCart(t)}),enablePageStarters(),setTimeout(function(){"function"==typeof zE&&zE(function(){zE.setHelpCenterSuggestions({labels:["subscribe","audio-format","settings-cart"]}),zE.show()})},2e3)}function enablePageUserList(){function t(){arrangeTrackList("#userListCont")}$(".top-page a").click(function(){return TX.handleClick(this),!1}),mainPlaylist.enablePlayAll(".top-page"),enableShares(),TX.stateHolders.userChartLastLocation=location.pathname,$(".top-page .trklist .trk-row").length>0&&enableTrackList($(".top-page"),$("#topIdType").val()),$("#utlEditBtn").click(function(){var t=$(this).parent().parent().parent().data("utlid");TX.rpcGet2Body(TX.handlerScript,"?act=utl&view=form&utl_id="+t)}),$(document).on("viewChange",function(){t()}),enablePageStarters(),t()}function enablePageUserListForm(){function t(){$(".utl-row.item").each(function(t){$(".pos-inr",this).html(t+1)})}function e(){var t;t=TX.stateHolders.userChartLastLocation?TX.stateHolders.userChartLastLocation:$("#shareURL").val(),TX.rpcGet2Body(TX.callScript,t,"#bodyBay",function(){enablePageStarters()})}function a(){TX.viewID<=2?0==$(".utl-row .artit-cont > .utl-cell").first().length&&$(".utl-row").each(function(){$(".title, .artists",this).detach().appendTo($(".artit-cont",this))}):$(".utl-row .artit-cont > .utl-cell").first().length>0&&$(".utl-row").each(function(){$(".title, .artists",this).detach().insertAfter($(".artit-cont",this))})}function i(){a()}$(".utl-form a").click(function(){return TX.handleClick(this),!1}),$("#utlTitleEdit").click(function(){var t,e;t=function(){var t,e,a;return $("#messagePopup .mspu-input").val()==$(".utl-form .utl-ttl").text()?(TX.hideMessage(),!1):(t=escape($("#messagePopup .mspu-input").val()),a=$("#utl_id").val(),e="act=utl_edit&utl_id="+a+"&title="+t,void $.ajax({url:TX.handlerScript,type:"GET",data:e,success:function(t){var e,i;return e=parseInt($(t).find("code").text()),isNaN(e)?!1:(i=$(t).find("message").text(),(-1==e||1==e)&&i.length>0?($("#messagePopup .mspu-cont").html(i),$("#messagePopup").addClass("error"),!1):(TX.hideMessage(),void TX.rpcGet2Body(TX.handlerScript,"?act=utl&view=form&utl_id="+a)))}}))},$("#messagePopup .mspu-input").val($(".utl-form .utl-ttl").text()),e="<b>Please provide a title for your chart:</b><br /><i>Note: A public URL will be generated from this title.</i>",TX.showMessage(e,{yesCallback:t,title:"Required",inputMode:!0,inputMin:3})}),$("#shareInp").val("https://"+location.host+$("#shareURL").val()),$("#shareInp").on("focus click",function(){$(this).select()}),$(".utl-row-cont").sortable({axis:"y",tolerance:"pointer",delay:200,containment:".utl-row-cont",stop:function(){t()},update:function(){$("#utlSave").show()}}),TX.isMobile&&$(".utl-row-cont").sortable({handle:".dragger"}),$(".utl-row.item .com-remove").click(function(){return 1==$(".utl-row.item").length?!1:void $(this).parent().parent().fadeOut(300,function(){$(this).remove(),t(),$("#utlSave").show()})}),$("#utlSave").click(function(){var t,a,i=[];$(".utl-row.item").each(function(){i.push($(this).data("trid"))}),a=$("#utl_id").val(),t="act=utl_rebuild&utl_id="+a+"&ids="+i.join(","),$.ajax({url:TX.handlerScript,type:"GET",data:t,success:function(){e()}})}),$("#utlCancel").click(function(){e()}),$(document).on("viewChange",function(){i()}),enablePageStarters(),i()}